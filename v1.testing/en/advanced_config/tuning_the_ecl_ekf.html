<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using the ECL EKF | PX4 User Guide</title>
    <meta name="generator" content="VuePress 1.5.4">
    <meta name="description" content="PX4 is the Professional Autopilot. Developed by world-class developers from industry and academia, and supported by an active world wide community, it powers all kinds of vehicles from racing and cargo drones through to ground vehicles and submersibles.">
    <link rel="preload" href="/v1.testing/assets/css/0.styles.92df0cd9.css" as="style"><link rel="preload" href="/v1.testing/assets/js/app.86f36f44.js" as="script"><link rel="preload" href="/v1.testing/assets/js/4.a66fe67b.js" as="script"><link rel="preload" href="/v1.testing/assets/js/71.e082acc6.js" as="script"><link rel="prefetch" href="/v1.testing/assets/js/1.6539f99e.js"><link rel="prefetch" href="/v1.testing/assets/js/10.9a6f5013.js"><link rel="prefetch" href="/v1.testing/assets/js/100.c702aca2.js"><link rel="prefetch" href="/v1.testing/assets/js/101.cbbf6704.js"><link rel="prefetch" href="/v1.testing/assets/js/102.3ded406b.js"><link rel="prefetch" href="/v1.testing/assets/js/103.facb5fed.js"><link rel="prefetch" href="/v1.testing/assets/js/104.12928503.js"><link rel="prefetch" href="/v1.testing/assets/js/105.6342e0c9.js"><link rel="prefetch" href="/v1.testing/assets/js/106.5c0df74a.js"><link rel="prefetch" href="/v1.testing/assets/js/107.858f9a8c.js"><link rel="prefetch" href="/v1.testing/assets/js/108.2f07c5a0.js"><link rel="prefetch" href="/v1.testing/assets/js/109.2a14c6c8.js"><link rel="prefetch" href="/v1.testing/assets/js/11.d458f41d.js"><link rel="prefetch" href="/v1.testing/assets/js/110.cc5d63c2.js"><link rel="prefetch" href="/v1.testing/assets/js/111.f3476ab0.js"><link rel="prefetch" href="/v1.testing/assets/js/112.28df5ed8.js"><link rel="prefetch" href="/v1.testing/assets/js/113.dbc1ce06.js"><link rel="prefetch" href="/v1.testing/assets/js/114.1885b233.js"><link rel="prefetch" href="/v1.testing/assets/js/115.40510639.js"><link rel="prefetch" href="/v1.testing/assets/js/116.5df640d9.js"><link rel="prefetch" href="/v1.testing/assets/js/117.0c9b82af.js"><link rel="prefetch" href="/v1.testing/assets/js/118.c7ffb999.js"><link rel="prefetch" href="/v1.testing/assets/js/119.13b6c5bd.js"><link rel="prefetch" href="/v1.testing/assets/js/12.54e1ba75.js"><link rel="prefetch" href="/v1.testing/assets/js/120.b1b852f0.js"><link rel="prefetch" href="/v1.testing/assets/js/121.ba03a5cf.js"><link rel="prefetch" href="/v1.testing/assets/js/122.eaa779ab.js"><link rel="prefetch" href="/v1.testing/assets/js/123.b1cec02e.js"><link rel="prefetch" href="/v1.testing/assets/js/124.cb331269.js"><link rel="prefetch" href="/v1.testing/assets/js/125.09ee5d46.js"><link rel="prefetch" href="/v1.testing/assets/js/126.a0bea84c.js"><link rel="prefetch" href="/v1.testing/assets/js/127.f753352d.js"><link rel="prefetch" href="/v1.testing/assets/js/128.ee9dca8a.js"><link rel="prefetch" href="/v1.testing/assets/js/129.a17453f5.js"><link rel="prefetch" href="/v1.testing/assets/js/13.357b5831.js"><link rel="prefetch" href="/v1.testing/assets/js/130.72a23ad8.js"><link rel="prefetch" href="/v1.testing/assets/js/131.adf93473.js"><link rel="prefetch" href="/v1.testing/assets/js/132.04262572.js"><link rel="prefetch" href="/v1.testing/assets/js/133.af8aa7be.js"><link rel="prefetch" href="/v1.testing/assets/js/134.859efc5f.js"><link rel="prefetch" href="/v1.testing/assets/js/135.016b1578.js"><link rel="prefetch" href="/v1.testing/assets/js/136.1763a148.js"><link rel="prefetch" href="/v1.testing/assets/js/137.d798ecb5.js"><link rel="prefetch" href="/v1.testing/assets/js/138.c1dfcfcb.js"><link rel="prefetch" href="/v1.testing/assets/js/139.76c909e1.js"><link rel="prefetch" href="/v1.testing/assets/js/14.b68c8de7.js"><link rel="prefetch" href="/v1.testing/assets/js/140.a622f72c.js"><link rel="prefetch" href="/v1.testing/assets/js/141.53284bb6.js"><link rel="prefetch" href="/v1.testing/assets/js/142.772ef985.js"><link rel="prefetch" href="/v1.testing/assets/js/143.160227c7.js"><link rel="prefetch" href="/v1.testing/assets/js/144.8492f9a1.js"><link rel="prefetch" href="/v1.testing/assets/js/145.acc2a824.js"><link rel="prefetch" href="/v1.testing/assets/js/146.74287680.js"><link rel="prefetch" href="/v1.testing/assets/js/147.9613c1b6.js"><link rel="prefetch" href="/v1.testing/assets/js/148.75fc11b0.js"><link rel="prefetch" href="/v1.testing/assets/js/149.51c8726f.js"><link rel="prefetch" href="/v1.testing/assets/js/15.05fdf8fc.js"><link rel="prefetch" href="/v1.testing/assets/js/150.19eb6ccf.js"><link rel="prefetch" href="/v1.testing/assets/js/151.a8989b0c.js"><link rel="prefetch" href="/v1.testing/assets/js/152.193ab92f.js"><link rel="prefetch" href="/v1.testing/assets/js/153.426c0e0f.js"><link rel="prefetch" href="/v1.testing/assets/js/154.85e0781a.js"><link rel="prefetch" href="/v1.testing/assets/js/155.e81e2f9b.js"><link rel="prefetch" href="/v1.testing/assets/js/156.1c7f8429.js"><link rel="prefetch" href="/v1.testing/assets/js/157.25d5456e.js"><link rel="prefetch" href="/v1.testing/assets/js/158.babeb33d.js"><link rel="prefetch" href="/v1.testing/assets/js/159.15d4c207.js"><link rel="prefetch" href="/v1.testing/assets/js/16.1362bfe6.js"><link rel="prefetch" href="/v1.testing/assets/js/160.8bed1cc0.js"><link rel="prefetch" href="/v1.testing/assets/js/161.c49eaa0e.js"><link rel="prefetch" href="/v1.testing/assets/js/162.9420319a.js"><link rel="prefetch" href="/v1.testing/assets/js/163.40313c9e.js"><link rel="prefetch" href="/v1.testing/assets/js/164.c9447044.js"><link rel="prefetch" href="/v1.testing/assets/js/165.a23d4a93.js"><link rel="prefetch" href="/v1.testing/assets/js/166.207c3a37.js"><link rel="prefetch" href="/v1.testing/assets/js/167.94f7f934.js"><link rel="prefetch" href="/v1.testing/assets/js/168.f4399eb6.js"><link rel="prefetch" href="/v1.testing/assets/js/169.8b46eb37.js"><link rel="prefetch" href="/v1.testing/assets/js/17.37816cc4.js"><link rel="prefetch" href="/v1.testing/assets/js/170.d0dcf147.js"><link rel="prefetch" href="/v1.testing/assets/js/171.3d7ac983.js"><link rel="prefetch" href="/v1.testing/assets/js/172.91916964.js"><link rel="prefetch" href="/v1.testing/assets/js/173.c913dad0.js"><link rel="prefetch" href="/v1.testing/assets/js/174.14e98388.js"><link rel="prefetch" href="/v1.testing/assets/js/175.a1dcdda4.js"><link rel="prefetch" href="/v1.testing/assets/js/176.5ccf5c18.js"><link rel="prefetch" href="/v1.testing/assets/js/177.1e8b3e52.js"><link rel="prefetch" href="/v1.testing/assets/js/178.0253e046.js"><link rel="prefetch" href="/v1.testing/assets/js/179.51428160.js"><link rel="prefetch" href="/v1.testing/assets/js/18.a0bb1a28.js"><link rel="prefetch" href="/v1.testing/assets/js/180.2666902e.js"><link rel="prefetch" href="/v1.testing/assets/js/181.9821a38a.js"><link rel="prefetch" href="/v1.testing/assets/js/182.2a207026.js"><link rel="prefetch" href="/v1.testing/assets/js/183.11db2b24.js"><link rel="prefetch" href="/v1.testing/assets/js/184.c5228bd2.js"><link rel="prefetch" href="/v1.testing/assets/js/185.daf56365.js"><link rel="prefetch" href="/v1.testing/assets/js/186.759fc195.js"><link rel="prefetch" href="/v1.testing/assets/js/187.ee68b121.js"><link rel="prefetch" href="/v1.testing/assets/js/188.3a111034.js"><link rel="prefetch" href="/v1.testing/assets/js/189.cb343c8c.js"><link rel="prefetch" href="/v1.testing/assets/js/19.90f7ab26.js"><link rel="prefetch" href="/v1.testing/assets/js/190.05abf489.js"><link rel="prefetch" href="/v1.testing/assets/js/191.7a29a4a4.js"><link rel="prefetch" href="/v1.testing/assets/js/192.e9174894.js"><link rel="prefetch" href="/v1.testing/assets/js/193.3a35d1d1.js"><link rel="prefetch" href="/v1.testing/assets/js/194.b4b80915.js"><link rel="prefetch" href="/v1.testing/assets/js/195.ec7282e7.js"><link rel="prefetch" href="/v1.testing/assets/js/196.4acc1f4d.js"><link rel="prefetch" href="/v1.testing/assets/js/197.9008bb82.js"><link rel="prefetch" href="/v1.testing/assets/js/198.7e34edc8.js"><link rel="prefetch" href="/v1.testing/assets/js/199.05c3c076.js"><link rel="prefetch" href="/v1.testing/assets/js/20.07ad86d8.js"><link rel="prefetch" href="/v1.testing/assets/js/200.84fb0ed7.js"><link rel="prefetch" href="/v1.testing/assets/js/201.369087b4.js"><link rel="prefetch" href="/v1.testing/assets/js/202.5cfdbf7d.js"><link rel="prefetch" href="/v1.testing/assets/js/203.d94c95ae.js"><link rel="prefetch" href="/v1.testing/assets/js/204.f83821fd.js"><link rel="prefetch" href="/v1.testing/assets/js/205.ad509eb2.js"><link rel="prefetch" href="/v1.testing/assets/js/206.523a1d91.js"><link rel="prefetch" href="/v1.testing/assets/js/207.09a4ed83.js"><link rel="prefetch" href="/v1.testing/assets/js/208.d5d7599e.js"><link rel="prefetch" href="/v1.testing/assets/js/209.11b05dc8.js"><link rel="prefetch" href="/v1.testing/assets/js/21.4bd0dc25.js"><link rel="prefetch" href="/v1.testing/assets/js/210.4b643125.js"><link rel="prefetch" href="/v1.testing/assets/js/211.d1c4a0ce.js"><link rel="prefetch" href="/v1.testing/assets/js/212.00ca17a8.js"><link rel="prefetch" href="/v1.testing/assets/js/213.432bbbfc.js"><link rel="prefetch" href="/v1.testing/assets/js/214.9cbd8953.js"><link rel="prefetch" href="/v1.testing/assets/js/215.1117017f.js"><link rel="prefetch" href="/v1.testing/assets/js/216.939fdaaa.js"><link rel="prefetch" href="/v1.testing/assets/js/217.6edf87de.js"><link rel="prefetch" href="/v1.testing/assets/js/218.c165a1e1.js"><link rel="prefetch" href="/v1.testing/assets/js/219.d91c8c26.js"><link rel="prefetch" href="/v1.testing/assets/js/22.2874413e.js"><link rel="prefetch" href="/v1.testing/assets/js/220.8cd3c89a.js"><link rel="prefetch" href="/v1.testing/assets/js/221.ff9bff31.js"><link rel="prefetch" href="/v1.testing/assets/js/222.8fb48fc6.js"><link rel="prefetch" href="/v1.testing/assets/js/223.b7b9e2b9.js"><link rel="prefetch" href="/v1.testing/assets/js/224.7c1fe305.js"><link rel="prefetch" href="/v1.testing/assets/js/225.52999bcd.js"><link rel="prefetch" href="/v1.testing/assets/js/226.2d68f2f3.js"><link rel="prefetch" href="/v1.testing/assets/js/227.e6323024.js"><link rel="prefetch" href="/v1.testing/assets/js/228.34c2a494.js"><link rel="prefetch" href="/v1.testing/assets/js/229.6f9f4314.js"><link rel="prefetch" href="/v1.testing/assets/js/23.da92313e.js"><link rel="prefetch" href="/v1.testing/assets/js/230.ea60f7ec.js"><link rel="prefetch" href="/v1.testing/assets/js/231.fc267f69.js"><link rel="prefetch" href="/v1.testing/assets/js/232.c9371f6d.js"><link rel="prefetch" href="/v1.testing/assets/js/233.fb0652d6.js"><link rel="prefetch" href="/v1.testing/assets/js/234.0ffc7d3a.js"><link rel="prefetch" href="/v1.testing/assets/js/235.1248519c.js"><link rel="prefetch" href="/v1.testing/assets/js/236.12e48043.js"><link rel="prefetch" href="/v1.testing/assets/js/237.6a0fd489.js"><link rel="prefetch" href="/v1.testing/assets/js/238.8da9e48a.js"><link rel="prefetch" href="/v1.testing/assets/js/239.f970cea7.js"><link rel="prefetch" href="/v1.testing/assets/js/24.23627839.js"><link rel="prefetch" href="/v1.testing/assets/js/240.941e9e3a.js"><link rel="prefetch" href="/v1.testing/assets/js/241.53b31150.js"><link rel="prefetch" href="/v1.testing/assets/js/242.88f28707.js"><link rel="prefetch" href="/v1.testing/assets/js/243.c29b4959.js"><link rel="prefetch" href="/v1.testing/assets/js/244.48f42ebe.js"><link rel="prefetch" href="/v1.testing/assets/js/245.20efcc77.js"><link rel="prefetch" href="/v1.testing/assets/js/246.b7249046.js"><link rel="prefetch" href="/v1.testing/assets/js/247.70998302.js"><link rel="prefetch" href="/v1.testing/assets/js/248.0786f310.js"><link rel="prefetch" href="/v1.testing/assets/js/249.dc0f7d25.js"><link rel="prefetch" href="/v1.testing/assets/js/25.2772adcd.js"><link rel="prefetch" href="/v1.testing/assets/js/250.ed26b1da.js"><link rel="prefetch" href="/v1.testing/assets/js/251.0f7c23f8.js"><link rel="prefetch" href="/v1.testing/assets/js/252.2db50b4f.js"><link rel="prefetch" href="/v1.testing/assets/js/253.435eb113.js"><link rel="prefetch" href="/v1.testing/assets/js/254.4f46ec29.js"><link rel="prefetch" href="/v1.testing/assets/js/255.456589bc.js"><link rel="prefetch" href="/v1.testing/assets/js/256.2b126e76.js"><link rel="prefetch" href="/v1.testing/assets/js/257.f464a4ef.js"><link rel="prefetch" href="/v1.testing/assets/js/258.6177e316.js"><link rel="prefetch" href="/v1.testing/assets/js/259.d2085a9a.js"><link rel="prefetch" href="/v1.testing/assets/js/26.8a98a983.js"><link rel="prefetch" href="/v1.testing/assets/js/260.e9fe936b.js"><link rel="prefetch" href="/v1.testing/assets/js/261.59ab0b8b.js"><link rel="prefetch" href="/v1.testing/assets/js/262.0487c0a1.js"><link rel="prefetch" href="/v1.testing/assets/js/263.cc94ef96.js"><link rel="prefetch" href="/v1.testing/assets/js/264.0ad29645.js"><link rel="prefetch" href="/v1.testing/assets/js/265.e058e618.js"><link rel="prefetch" href="/v1.testing/assets/js/266.70b18c2c.js"><link rel="prefetch" href="/v1.testing/assets/js/267.b2aea624.js"><link rel="prefetch" href="/v1.testing/assets/js/268.abbf9dd3.js"><link rel="prefetch" href="/v1.testing/assets/js/269.c3844e2a.js"><link rel="prefetch" href="/v1.testing/assets/js/27.e2005ad6.js"><link rel="prefetch" href="/v1.testing/assets/js/270.b34c6df2.js"><link rel="prefetch" href="/v1.testing/assets/js/271.7e288885.js"><link rel="prefetch" href="/v1.testing/assets/js/272.b7614f0d.js"><link rel="prefetch" href="/v1.testing/assets/js/273.10dd26f9.js"><link rel="prefetch" href="/v1.testing/assets/js/274.e02d6749.js"><link rel="prefetch" href="/v1.testing/assets/js/275.ae2d6d91.js"><link rel="prefetch" href="/v1.testing/assets/js/276.4b2bf642.js"><link rel="prefetch" href="/v1.testing/assets/js/277.c20725f8.js"><link rel="prefetch" href="/v1.testing/assets/js/278.7ec2f624.js"><link rel="prefetch" href="/v1.testing/assets/js/279.7fc2762d.js"><link rel="prefetch" href="/v1.testing/assets/js/28.2f37de72.js"><link rel="prefetch" href="/v1.testing/assets/js/280.ba81bb85.js"><link rel="prefetch" href="/v1.testing/assets/js/281.ab1009d3.js"><link rel="prefetch" href="/v1.testing/assets/js/282.5539557c.js"><link rel="prefetch" href="/v1.testing/assets/js/283.b418bc7c.js"><link rel="prefetch" href="/v1.testing/assets/js/284.bc3fde87.js"><link rel="prefetch" href="/v1.testing/assets/js/285.be7deb94.js"><link rel="prefetch" href="/v1.testing/assets/js/286.ff49787b.js"><link rel="prefetch" href="/v1.testing/assets/js/287.c97dbbb5.js"><link rel="prefetch" href="/v1.testing/assets/js/288.18dd3cbf.js"><link rel="prefetch" href="/v1.testing/assets/js/289.e538112b.js"><link rel="prefetch" href="/v1.testing/assets/js/29.9a5eff83.js"><link rel="prefetch" href="/v1.testing/assets/js/290.7f232b71.js"><link rel="prefetch" href="/v1.testing/assets/js/291.3bd37b20.js"><link rel="prefetch" href="/v1.testing/assets/js/292.b118b9bf.js"><link rel="prefetch" href="/v1.testing/assets/js/293.0dbe57ac.js"><link rel="prefetch" href="/v1.testing/assets/js/294.89bcd8f0.js"><link rel="prefetch" href="/v1.testing/assets/js/295.d385fb8b.js"><link rel="prefetch" href="/v1.testing/assets/js/296.b91d91d8.js"><link rel="prefetch" href="/v1.testing/assets/js/297.439ce00e.js"><link rel="prefetch" href="/v1.testing/assets/js/298.c6b16fb1.js"><link rel="prefetch" href="/v1.testing/assets/js/299.820d997c.js"><link rel="prefetch" href="/v1.testing/assets/js/30.8af92fd6.js"><link rel="prefetch" href="/v1.testing/assets/js/300.bb59ac3f.js"><link rel="prefetch" href="/v1.testing/assets/js/301.a0f389c9.js"><link rel="prefetch" href="/v1.testing/assets/js/302.f3e67802.js"><link rel="prefetch" href="/v1.testing/assets/js/303.cea633f3.js"><link rel="prefetch" href="/v1.testing/assets/js/304.96f828e6.js"><link rel="prefetch" href="/v1.testing/assets/js/305.98549c2f.js"><link rel="prefetch" href="/v1.testing/assets/js/306.66c58e78.js"><link rel="prefetch" href="/v1.testing/assets/js/307.0891bb05.js"><link rel="prefetch" href="/v1.testing/assets/js/308.170a5555.js"><link rel="prefetch" href="/v1.testing/assets/js/309.d7b1328c.js"><link rel="prefetch" href="/v1.testing/assets/js/31.cc418a15.js"><link rel="prefetch" href="/v1.testing/assets/js/310.40169fb4.js"><link rel="prefetch" href="/v1.testing/assets/js/311.27a84470.js"><link rel="prefetch" href="/v1.testing/assets/js/312.54415db6.js"><link rel="prefetch" href="/v1.testing/assets/js/313.68d8400d.js"><link rel="prefetch" href="/v1.testing/assets/js/314.f2c69d33.js"><link rel="prefetch" href="/v1.testing/assets/js/315.a060a2f4.js"><link rel="prefetch" href="/v1.testing/assets/js/316.4bbfedf3.js"><link rel="prefetch" href="/v1.testing/assets/js/317.c76fce22.js"><link rel="prefetch" href="/v1.testing/assets/js/318.a37ae3b9.js"><link rel="prefetch" href="/v1.testing/assets/js/319.14370f7b.js"><link rel="prefetch" href="/v1.testing/assets/js/32.9e1402ca.js"><link rel="prefetch" href="/v1.testing/assets/js/320.27a8ae87.js"><link rel="prefetch" href="/v1.testing/assets/js/321.e6f291db.js"><link rel="prefetch" href="/v1.testing/assets/js/322.653a3c4f.js"><link rel="prefetch" href="/v1.testing/assets/js/323.a670bfed.js"><link rel="prefetch" href="/v1.testing/assets/js/324.2332df5f.js"><link rel="prefetch" href="/v1.testing/assets/js/325.dedc3b16.js"><link rel="prefetch" href="/v1.testing/assets/js/326.30e1c92d.js"><link rel="prefetch" href="/v1.testing/assets/js/327.415a1203.js"><link rel="prefetch" href="/v1.testing/assets/js/328.512d4bc4.js"><link rel="prefetch" href="/v1.testing/assets/js/329.0174f422.js"><link rel="prefetch" href="/v1.testing/assets/js/33.d44f4ba3.js"><link rel="prefetch" href="/v1.testing/assets/js/330.34b3f204.js"><link rel="prefetch" href="/v1.testing/assets/js/331.57df3807.js"><link rel="prefetch" href="/v1.testing/assets/js/332.ede7ca5a.js"><link rel="prefetch" href="/v1.testing/assets/js/333.a368db7b.js"><link rel="prefetch" href="/v1.testing/assets/js/334.31ef38f9.js"><link rel="prefetch" href="/v1.testing/assets/js/335.98f795ee.js"><link rel="prefetch" href="/v1.testing/assets/js/336.0cc1cf16.js"><link rel="prefetch" href="/v1.testing/assets/js/337.0ada2182.js"><link rel="prefetch" href="/v1.testing/assets/js/338.684e1da9.js"><link rel="prefetch" href="/v1.testing/assets/js/339.a0c256c5.js"><link rel="prefetch" href="/v1.testing/assets/js/34.bf094b22.js"><link rel="prefetch" href="/v1.testing/assets/js/340.aad91778.js"><link rel="prefetch" href="/v1.testing/assets/js/341.a348d282.js"><link rel="prefetch" href="/v1.testing/assets/js/342.45e66288.js"><link rel="prefetch" href="/v1.testing/assets/js/343.8fa531e2.js"><link rel="prefetch" href="/v1.testing/assets/js/344.43e013f7.js"><link rel="prefetch" href="/v1.testing/assets/js/345.a5484330.js"><link rel="prefetch" href="/v1.testing/assets/js/346.96851fba.js"><link rel="prefetch" href="/v1.testing/assets/js/347.4646bc4c.js"><link rel="prefetch" href="/v1.testing/assets/js/348.77587631.js"><link rel="prefetch" href="/v1.testing/assets/js/349.7fd19813.js"><link rel="prefetch" href="/v1.testing/assets/js/35.e53a77b1.js"><link rel="prefetch" href="/v1.testing/assets/js/350.0d2bd8cb.js"><link rel="prefetch" href="/v1.testing/assets/js/351.6ba29866.js"><link rel="prefetch" href="/v1.testing/assets/js/352.7e02197b.js"><link rel="prefetch" href="/v1.testing/assets/js/353.0e2556e1.js"><link rel="prefetch" href="/v1.testing/assets/js/354.43db20a3.js"><link rel="prefetch" href="/v1.testing/assets/js/355.e8e6ebb1.js"><link rel="prefetch" href="/v1.testing/assets/js/356.8361b817.js"><link rel="prefetch" href="/v1.testing/assets/js/357.2460d1a7.js"><link rel="prefetch" href="/v1.testing/assets/js/358.379d010e.js"><link rel="prefetch" href="/v1.testing/assets/js/359.bf4150f6.js"><link rel="prefetch" href="/v1.testing/assets/js/36.26b70515.js"><link rel="prefetch" href="/v1.testing/assets/js/360.2d568d3e.js"><link rel="prefetch" href="/v1.testing/assets/js/361.bcb8e17b.js"><link rel="prefetch" href="/v1.testing/assets/js/362.a3711cde.js"><link rel="prefetch" href="/v1.testing/assets/js/363.cca05bb9.js"><link rel="prefetch" href="/v1.testing/assets/js/364.8446cc7f.js"><link rel="prefetch" href="/v1.testing/assets/js/365.4ccaa84f.js"><link rel="prefetch" href="/v1.testing/assets/js/366.739d7f1f.js"><link rel="prefetch" href="/v1.testing/assets/js/367.9b919e22.js"><link rel="prefetch" href="/v1.testing/assets/js/368.c2731af8.js"><link rel="prefetch" href="/v1.testing/assets/js/369.8b636e7e.js"><link rel="prefetch" href="/v1.testing/assets/js/37.f69c611a.js"><link rel="prefetch" href="/v1.testing/assets/js/370.4eb3f282.js"><link rel="prefetch" href="/v1.testing/assets/js/371.e4c38cb0.js"><link rel="prefetch" href="/v1.testing/assets/js/372.cdd98167.js"><link rel="prefetch" href="/v1.testing/assets/js/373.b427fbe4.js"><link rel="prefetch" href="/v1.testing/assets/js/374.65eba326.js"><link rel="prefetch" href="/v1.testing/assets/js/375.350f1e57.js"><link rel="prefetch" href="/v1.testing/assets/js/376.9d5d45cc.js"><link rel="prefetch" href="/v1.testing/assets/js/377.6a229567.js"><link rel="prefetch" href="/v1.testing/assets/js/378.1ab18da1.js"><link rel="prefetch" href="/v1.testing/assets/js/379.d1ca2ae7.js"><link rel="prefetch" href="/v1.testing/assets/js/38.ecfde901.js"><link rel="prefetch" href="/v1.testing/assets/js/380.a98b60ce.js"><link rel="prefetch" href="/v1.testing/assets/js/381.1397286c.js"><link rel="prefetch" href="/v1.testing/assets/js/382.ccafe8da.js"><link rel="prefetch" href="/v1.testing/assets/js/383.1421552c.js"><link rel="prefetch" href="/v1.testing/assets/js/384.aa09d183.js"><link rel="prefetch" href="/v1.testing/assets/js/385.20216372.js"><link rel="prefetch" href="/v1.testing/assets/js/386.72f09e9e.js"><link rel="prefetch" href="/v1.testing/assets/js/387.664c8391.js"><link rel="prefetch" href="/v1.testing/assets/js/388.f1f7dd36.js"><link rel="prefetch" href="/v1.testing/assets/js/389.4775a204.js"><link rel="prefetch" href="/v1.testing/assets/js/39.21547398.js"><link rel="prefetch" href="/v1.testing/assets/js/390.d25f9d68.js"><link rel="prefetch" href="/v1.testing/assets/js/391.4d7bb35f.js"><link rel="prefetch" href="/v1.testing/assets/js/392.7cc4340e.js"><link rel="prefetch" href="/v1.testing/assets/js/393.45c4bc3a.js"><link rel="prefetch" href="/v1.testing/assets/js/394.12b2ad40.js"><link rel="prefetch" href="/v1.testing/assets/js/395.ed88c867.js"><link rel="prefetch" href="/v1.testing/assets/js/396.f0674eb5.js"><link rel="prefetch" href="/v1.testing/assets/js/397.2d6fc3f9.js"><link rel="prefetch" href="/v1.testing/assets/js/398.aa298851.js"><link rel="prefetch" href="/v1.testing/assets/js/399.ebc35062.js"><link rel="prefetch" href="/v1.testing/assets/js/40.c4ad65f1.js"><link rel="prefetch" href="/v1.testing/assets/js/400.a3aeaae4.js"><link rel="prefetch" href="/v1.testing/assets/js/401.75eb22be.js"><link rel="prefetch" href="/v1.testing/assets/js/402.3bf4f142.js"><link rel="prefetch" href="/v1.testing/assets/js/403.765adbfa.js"><link rel="prefetch" href="/v1.testing/assets/js/404.345cd3f8.js"><link rel="prefetch" href="/v1.testing/assets/js/405.24c9ecbd.js"><link rel="prefetch" href="/v1.testing/assets/js/406.e91b9e98.js"><link rel="prefetch" href="/v1.testing/assets/js/407.b89bec8f.js"><link rel="prefetch" href="/v1.testing/assets/js/408.f6725e17.js"><link rel="prefetch" href="/v1.testing/assets/js/409.a1a83e09.js"><link rel="prefetch" href="/v1.testing/assets/js/41.9354f2cb.js"><link rel="prefetch" href="/v1.testing/assets/js/410.a10fa21a.js"><link rel="prefetch" href="/v1.testing/assets/js/411.d3419ca7.js"><link rel="prefetch" href="/v1.testing/assets/js/412.361cb1cb.js"><link rel="prefetch" href="/v1.testing/assets/js/413.1ea4b353.js"><link rel="prefetch" href="/v1.testing/assets/js/414.cd32d001.js"><link rel="prefetch" href="/v1.testing/assets/js/415.39aeefba.js"><link rel="prefetch" href="/v1.testing/assets/js/416.c7fbb5b8.js"><link rel="prefetch" href="/v1.testing/assets/js/417.2d523984.js"><link rel="prefetch" href="/v1.testing/assets/js/418.2feb721f.js"><link rel="prefetch" href="/v1.testing/assets/js/419.3e408abe.js"><link rel="prefetch" href="/v1.testing/assets/js/42.13ef6f94.js"><link rel="prefetch" href="/v1.testing/assets/js/420.53f7d53c.js"><link rel="prefetch" href="/v1.testing/assets/js/421.5319d1c6.js"><link rel="prefetch" href="/v1.testing/assets/js/422.4b2e56f8.js"><link rel="prefetch" href="/v1.testing/assets/js/423.9d165269.js"><link rel="prefetch" href="/v1.testing/assets/js/424.282ffceb.js"><link rel="prefetch" href="/v1.testing/assets/js/425.e40a9e0a.js"><link rel="prefetch" href="/v1.testing/assets/js/426.733f5f25.js"><link rel="prefetch" href="/v1.testing/assets/js/427.71078c92.js"><link rel="prefetch" href="/v1.testing/assets/js/428.ca5e736d.js"><link rel="prefetch" href="/v1.testing/assets/js/429.92e8162b.js"><link rel="prefetch" href="/v1.testing/assets/js/43.8f7aff8a.js"><link rel="prefetch" href="/v1.testing/assets/js/430.b938945a.js"><link rel="prefetch" href="/v1.testing/assets/js/431.57d72ba3.js"><link rel="prefetch" href="/v1.testing/assets/js/432.33e52ed7.js"><link rel="prefetch" href="/v1.testing/assets/js/433.0fc2b1ca.js"><link rel="prefetch" href="/v1.testing/assets/js/434.719b8d98.js"><link rel="prefetch" href="/v1.testing/assets/js/435.9f674594.js"><link rel="prefetch" href="/v1.testing/assets/js/436.111bccb5.js"><link rel="prefetch" href="/v1.testing/assets/js/437.3325cc3a.js"><link rel="prefetch" href="/v1.testing/assets/js/438.623a5d2c.js"><link rel="prefetch" href="/v1.testing/assets/js/439.cf7f0c29.js"><link rel="prefetch" href="/v1.testing/assets/js/44.54c23808.js"><link rel="prefetch" href="/v1.testing/assets/js/440.522d1845.js"><link rel="prefetch" href="/v1.testing/assets/js/441.19991e60.js"><link rel="prefetch" href="/v1.testing/assets/js/442.c0812518.js"><link rel="prefetch" href="/v1.testing/assets/js/443.094e9d30.js"><link rel="prefetch" href="/v1.testing/assets/js/444.6ce0c273.js"><link rel="prefetch" href="/v1.testing/assets/js/445.c2c101f5.js"><link rel="prefetch" href="/v1.testing/assets/js/446.c4500ad4.js"><link rel="prefetch" href="/v1.testing/assets/js/447.09389189.js"><link rel="prefetch" href="/v1.testing/assets/js/448.64af7b09.js"><link rel="prefetch" href="/v1.testing/assets/js/449.130f86fa.js"><link rel="prefetch" href="/v1.testing/assets/js/45.e4cacd1a.js"><link rel="prefetch" href="/v1.testing/assets/js/450.4ae44632.js"><link rel="prefetch" href="/v1.testing/assets/js/451.b394dac1.js"><link rel="prefetch" href="/v1.testing/assets/js/452.292bd658.js"><link rel="prefetch" href="/v1.testing/assets/js/453.302dbcd4.js"><link rel="prefetch" href="/v1.testing/assets/js/454.ca8a89e8.js"><link rel="prefetch" href="/v1.testing/assets/js/455.356052a9.js"><link rel="prefetch" href="/v1.testing/assets/js/456.ea9d5734.js"><link rel="prefetch" href="/v1.testing/assets/js/457.6f065393.js"><link rel="prefetch" href="/v1.testing/assets/js/458.a56e89b1.js"><link rel="prefetch" href="/v1.testing/assets/js/459.445446f4.js"><link rel="prefetch" href="/v1.testing/assets/js/46.440a2f92.js"><link rel="prefetch" href="/v1.testing/assets/js/460.46d707a1.js"><link rel="prefetch" href="/v1.testing/assets/js/461.03c43c86.js"><link rel="prefetch" href="/v1.testing/assets/js/462.a0a50e3c.js"><link rel="prefetch" href="/v1.testing/assets/js/463.0e55029c.js"><link rel="prefetch" href="/v1.testing/assets/js/464.8c4c2f6a.js"><link rel="prefetch" href="/v1.testing/assets/js/465.c92c4417.js"><link rel="prefetch" href="/v1.testing/assets/js/466.026aec80.js"><link rel="prefetch" href="/v1.testing/assets/js/467.e7b61339.js"><link rel="prefetch" href="/v1.testing/assets/js/468.6f92a53b.js"><link rel="prefetch" href="/v1.testing/assets/js/469.b2d0db30.js"><link rel="prefetch" href="/v1.testing/assets/js/47.e38cd33e.js"><link rel="prefetch" href="/v1.testing/assets/js/470.9ab1531d.js"><link rel="prefetch" href="/v1.testing/assets/js/471.bc110ba1.js"><link rel="prefetch" href="/v1.testing/assets/js/472.919178f6.js"><link rel="prefetch" href="/v1.testing/assets/js/473.19b0003a.js"><link rel="prefetch" href="/v1.testing/assets/js/474.5f92846b.js"><link rel="prefetch" href="/v1.testing/assets/js/475.055d2091.js"><link rel="prefetch" href="/v1.testing/assets/js/476.4bbe965c.js"><link rel="prefetch" href="/v1.testing/assets/js/477.e1cb7fc8.js"><link rel="prefetch" href="/v1.testing/assets/js/478.7dde60ce.js"><link rel="prefetch" href="/v1.testing/assets/js/479.e375b8cf.js"><link rel="prefetch" href="/v1.testing/assets/js/48.e1210d16.js"><link rel="prefetch" href="/v1.testing/assets/js/480.00e9cb41.js"><link rel="prefetch" href="/v1.testing/assets/js/481.d125634b.js"><link rel="prefetch" href="/v1.testing/assets/js/482.ef0978a0.js"><link rel="prefetch" href="/v1.testing/assets/js/483.62278259.js"><link rel="prefetch" href="/v1.testing/assets/js/484.ce0c1d26.js"><link rel="prefetch" href="/v1.testing/assets/js/485.3c37e421.js"><link rel="prefetch" href="/v1.testing/assets/js/486.86d68d41.js"><link rel="prefetch" href="/v1.testing/assets/js/487.40199468.js"><link rel="prefetch" href="/v1.testing/assets/js/488.69596626.js"><link rel="prefetch" href="/v1.testing/assets/js/489.6ed58cd1.js"><link rel="prefetch" href="/v1.testing/assets/js/49.d513bb14.js"><link rel="prefetch" href="/v1.testing/assets/js/490.60bc0d4d.js"><link rel="prefetch" href="/v1.testing/assets/js/491.bf72a9ca.js"><link rel="prefetch" href="/v1.testing/assets/js/492.152a3c64.js"><link rel="prefetch" href="/v1.testing/assets/js/493.9b16d974.js"><link rel="prefetch" href="/v1.testing/assets/js/494.6a47a7ac.js"><link rel="prefetch" href="/v1.testing/assets/js/495.b7998b58.js"><link rel="prefetch" href="/v1.testing/assets/js/496.84595f3b.js"><link rel="prefetch" href="/v1.testing/assets/js/497.45baa4ad.js"><link rel="prefetch" href="/v1.testing/assets/js/498.dac107c5.js"><link rel="prefetch" href="/v1.testing/assets/js/499.aa2e82be.js"><link rel="prefetch" href="/v1.testing/assets/js/5.f780e1aa.js"><link rel="prefetch" href="/v1.testing/assets/js/50.4b523fc5.js"><link rel="prefetch" href="/v1.testing/assets/js/500.45144b3a.js"><link rel="prefetch" href="/v1.testing/assets/js/501.d8a82d60.js"><link rel="prefetch" href="/v1.testing/assets/js/502.8776dd9f.js"><link rel="prefetch" href="/v1.testing/assets/js/503.9790f071.js"><link rel="prefetch" href="/v1.testing/assets/js/504.6297c014.js"><link rel="prefetch" href="/v1.testing/assets/js/505.8a79ae42.js"><link rel="prefetch" href="/v1.testing/assets/js/506.91615759.js"><link rel="prefetch" href="/v1.testing/assets/js/51.74b0af95.js"><link rel="prefetch" href="/v1.testing/assets/js/52.75dae12d.js"><link rel="prefetch" href="/v1.testing/assets/js/53.fb0ee3f5.js"><link rel="prefetch" href="/v1.testing/assets/js/54.7f973e62.js"><link rel="prefetch" href="/v1.testing/assets/js/55.1cbd0920.js"><link rel="prefetch" href="/v1.testing/assets/js/56.661fbd80.js"><link rel="prefetch" href="/v1.testing/assets/js/57.1ca22d96.js"><link rel="prefetch" href="/v1.testing/assets/js/58.61615088.js"><link rel="prefetch" href="/v1.testing/assets/js/59.96600d65.js"><link rel="prefetch" href="/v1.testing/assets/js/6.f1e3f5da.js"><link rel="prefetch" href="/v1.testing/assets/js/60.29feda9c.js"><link rel="prefetch" href="/v1.testing/assets/js/61.3e550069.js"><link rel="prefetch" href="/v1.testing/assets/js/62.32601df7.js"><link rel="prefetch" href="/v1.testing/assets/js/63.5a9ce917.js"><link rel="prefetch" href="/v1.testing/assets/js/64.77894337.js"><link rel="prefetch" href="/v1.testing/assets/js/65.7cd214b2.js"><link rel="prefetch" href="/v1.testing/assets/js/66.fc1c8686.js"><link rel="prefetch" href="/v1.testing/assets/js/67.f4ca9116.js"><link rel="prefetch" href="/v1.testing/assets/js/68.19253937.js"><link rel="prefetch" href="/v1.testing/assets/js/69.b92add7e.js"><link rel="prefetch" href="/v1.testing/assets/js/7.063f48f7.js"><link rel="prefetch" href="/v1.testing/assets/js/70.a16b8869.js"><link rel="prefetch" href="/v1.testing/assets/js/72.a876e8c6.js"><link rel="prefetch" href="/v1.testing/assets/js/73.e65150dc.js"><link rel="prefetch" href="/v1.testing/assets/js/74.fdb5a3eb.js"><link rel="prefetch" href="/v1.testing/assets/js/75.efaf6794.js"><link rel="prefetch" href="/v1.testing/assets/js/76.b74c34f2.js"><link rel="prefetch" href="/v1.testing/assets/js/77.0ef678c7.js"><link rel="prefetch" href="/v1.testing/assets/js/78.2328ea6d.js"><link rel="prefetch" href="/v1.testing/assets/js/79.9d0ccc8f.js"><link rel="prefetch" href="/v1.testing/assets/js/8.f03796eb.js"><link rel="prefetch" href="/v1.testing/assets/js/80.9636271e.js"><link rel="prefetch" href="/v1.testing/assets/js/81.b3f44eb4.js"><link rel="prefetch" href="/v1.testing/assets/js/82.81bc827f.js"><link rel="prefetch" href="/v1.testing/assets/js/83.12a3049f.js"><link rel="prefetch" href="/v1.testing/assets/js/84.0ca5ccfa.js"><link rel="prefetch" href="/v1.testing/assets/js/85.7c70fe72.js"><link rel="prefetch" href="/v1.testing/assets/js/86.78153a4d.js"><link rel="prefetch" href="/v1.testing/assets/js/87.5420f099.js"><link rel="prefetch" href="/v1.testing/assets/js/88.9248c6cf.js"><link rel="prefetch" href="/v1.testing/assets/js/89.1d687329.js"><link rel="prefetch" href="/v1.testing/assets/js/9.998e0b72.js"><link rel="prefetch" href="/v1.testing/assets/js/90.9c2f103f.js"><link rel="prefetch" href="/v1.testing/assets/js/91.30f7fb3c.js"><link rel="prefetch" href="/v1.testing/assets/js/92.bc636ced.js"><link rel="prefetch" href="/v1.testing/assets/js/93.89da3202.js"><link rel="prefetch" href="/v1.testing/assets/js/94.c0812154.js"><link rel="prefetch" href="/v1.testing/assets/js/95.758a346d.js"><link rel="prefetch" href="/v1.testing/assets/js/96.2d5f92ef.js"><link rel="prefetch" href="/v1.testing/assets/js/97.4579c4f9.js"><link rel="prefetch" href="/v1.testing/assets/js/98.1903be86.js"><link rel="prefetch" href="/v1.testing/assets/js/99.3305b7a7.js"><link rel="prefetch" href="/v1.testing/assets/js/vendors~docsearch.bd58dd2a.js">
    <link rel="stylesheet" href="/v1.testing/assets/css/0.styles.92df0cd9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v1.testing/en/" class="home-link router-link-active"><img src="/v1.testing/logo_pro_small.png" alt="PX4 User Guide" class="logo"> <span class="site-name can-hide">PX4 User Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://px4.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PX4
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://qgroundcontrol.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.dronecode.org/sdk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVSDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://mavlink.io/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVLINK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation Menu" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation Menu" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dev.px4.io/master/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PX4 Developer Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl User Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dev.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl Developer Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mavlink.io/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVLink Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVSDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://camera-manager.dronecode.org/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dronecode Camera Manager
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="http://discuss.px4.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions Menu" class="dropdown-title"><span class="title">Version</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions Menu" class="mobile-dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1.testing/" class="nav-link router-link-active">
  master
</a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.11/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.11
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dev.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.10
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.9.0/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.9
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.8.2/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1.testing/en/advanced_config/tuning_the_ecl_ekf.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/v1.testing/zh/advanced_config/tuning_the_ecl_ekf.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://px4.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PX4
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://qgroundcontrol.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.dronecode.org/sdk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVSDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://mavlink.io/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVLINK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation Menu" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Documentation Menu" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dev.px4.io/master/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PX4 Developer Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl User Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dev.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  QGroundControl Developer Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mavlink.io/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVLink Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mavsdk.mavlink.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MAVSDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://camera-manager.dronecode.org/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dronecode Camera Manager
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="http://discuss.px4.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions Menu" class="dropdown-title"><span class="title">Version</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions Menu" class="mobile-dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1.testing/" class="nav-link router-link-active">
  master
</a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.11/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.11
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dev.qgroundcontrol.com/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.10
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.9.0/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.9
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.px4.io/v1.8.2/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1.testing/en/advanced_config/tuning_the_ecl_ekf.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/v1.testing/zh/advanced_config/tuning_the_ecl_ekf.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/v1.testing/en/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/getting_started/" class="sidebar-heading clickable"><span>Getting Started</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/assembly/" class="sidebar-heading clickable"><span>Basic Assembly</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/config/" class="sidebar-heading clickable"><span>Basic Configuration</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/airframes/" class="sidebar-heading clickable"><span>Airframe Builds</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/flying/" class="sidebar-heading clickable"><span>Flying</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/log/flight_log_analysis" class="sidebar-heading clickable"><span>Flight Log Analysis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/advanced_features/" class="sidebar-heading clickable"><span>Advanced Features</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/advanced_config/" class="sidebar-heading clickable router-link-active open"><span>Advanced Configuration</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/v1.testing/en/advanced_config/parameters.html" class="sidebar-link">Finding/Updating Parameters</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/v1.testing/en/config_mc/" class="sidebar-heading clickable"><span>Multicopter Config/Tuning</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/v1.testing/en/config_fw/" class="sidebar-heading clickable"><span>Fixed Wing  Config/Tuning</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/v1.testing/en/config_vtol/" class="sidebar-heading clickable"><span>VTOL Config/Tuning</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/v1.testing/en/advanced_config/esc_calibration.html" class="sidebar-link">ESC Calibration</a></li><li><a href="/v1.testing/en/advanced_config/tuning_the_ecl_ekf.html" aria-current="page" class="active sidebar-link">ECL/EKF Overview &amp; Tuning</a></li><li><a href="/v1.testing/en/advanced_config/flight_termination.html" class="sidebar-link">Flight Termination Configuration</a></li><li><a href="/v1.testing/en/advanced_config/bootloader_update.html" class="sidebar-link">Bootloader Update</a></li><li><a href="/v1.testing/en/advanced_config/bootloader_update_from_betaflight.html" class="sidebar-link">Bootloader Flashing onto Betaflight Systems</a></li><li><a href="/v1.testing/en/advanced_config/land_detector.html" class="sidebar-link">Land Detector Configuration</a></li><li><a href="/v1.testing/en/advanced_config/sensor_thermal_calibration.html" class="sidebar-link">Sensor Thermal Compensation</a></li><li><a href="/v1.testing/en/advanced_config/compass_power_compensation.html" class="sidebar-link">Compass Power Compensation</a></li><li><a href="/v1.testing/en/advanced_config/advanced_flight_controller_orientation_leveling.html" class="sidebar-link">Advanced Controller Orientation</a></li><li><a href="/v1.testing/en/advanced_config/static_pressure_buildup.html" class="sidebar-link">Static Pressure Buildup</a></li><li><a href="/v1.testing/en/advanced_config/prearm_arm_disarm.html" class="sidebar-link">Prearm/Arm/Disarm Configuration</a></li><li><a href="/v1.testing/en/advanced_config/parameter_reference.html" class="sidebar-link">Full Parameter Reference</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/peripherals/" class="sidebar-heading clickable"><span>Peripheral Hardware</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/flight_controller/" class="sidebar-heading clickable"><span>Autopilot Hardware</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/complete_vehicles/" class="sidebar-heading clickable"><span>Complete Vehicles</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/v1.testing/en/development/development.html" class="sidebar-link">Development</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.testing/en/" class="sidebar-heading clickable router-link-active"><span>Dronecode Shortcuts</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="using-the-ecl-ekf"><a href="#using-the-ecl-ekf" class="header-anchor">#</a> Using the ECL EKF</h1> <p>This tutorial answers common questions about use of the ECL EKF algorithm.</p> <blockquote><p><strong>Tip</strong> The <a href="https://youtu.be/HkYRJJoyBwQ" target="_blank" rel="noopener noreferrer">PX4 State Estimation Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> video from the <em>PX4 Developer Summit 2019</em> (Dr. Paul Riseborough) provides an overview of the estimator, and additionally describes both the major changes from 2018/2019, and the expected improvements through 2020.</p></blockquote> <h2 id="what-is-the-ecl-ekf"><a href="#what-is-the-ecl-ekf" class="header-anchor">#</a> What is the ECL EKF?</h2> <p>The Estimation and Control Library (ECL) uses an Extended Kalman Filter (EKF) algorithm to process sensor measurements and provide an estimate of the following states:</p> <ul><li>Quaternion defining the rotation from North, East, Down local earth frame to X, Y, Z body frame</li> <li>Velocity at the IMU - North, East, Down (m/s)</li> <li>Position at the IMU - North, East, Down (m)</li> <li>IMU delta angle bias estimates - X, Y, Z (rad)</li> <li>IMU delta velocity bias estimates - X, Y, Z(m/s)</li> <li>Earth Magnetic field components - North, East, Down (gauss)</li> <li>Vehicle body frame magnetic field bias - X, Y, Z (gauss)</li> <li>Wind velocity - North, East (m/s)</li></ul> <p>The EKF runs on a delayed 'fusion time horizon' to allow for different time delays on each measurement relative to the IMU.
Data for each sensor is FIFO buffered and retrieved from the buffer by the EKF to be used at the correct time.
The delay compensation for each sensor is controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#ekf2">EKF2_*_DELAY</a> parameters.</p> <p>A complementary filter is used to propagate the states forward from the 'fusion time horizon' to current time using the buffered IMU data.
The time constant for this filter is controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_TAU_VEL">EKF2_TAU_VEL</a> and <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_TAU_POS">EKF2_TAU_POS</a> parameters.</p> <blockquote><p><strong>Note</strong> The 'fusion time horizon' delay and length of the buffers is determined by the largest of the <code>EKF2_*_DELAY</code> parameters.
If a sensor is not being used, it is recommended to set its time delay to zero.
Reducing the 'fusion time horizon' delay reduces errors in the complementary filter used to propagate states forward to current time.</p></blockquote> <p>The position and velocity states are adjusted to account for the offset between the IMU and the body frame before they are output to the control loops.
The position of the IMU relative to the body frame is set by the <code>EKF2_IMU_POS_X,Y,Z</code> parameters.</p> <p>The EKF uses the IMU data for state prediction only. IMU data is not used as an observation in the EKF derivation.
The algebraic equations for the covariance prediction, state update and covariance update were derived using the Matlab symbolic toolbox and can be found here: [Matlab Symbolic Derivation](https://github.com/PX4/ecl/blob/master/EKF/matlab/scripts/Inertial Nav EKF/GenerateNavFilterEquations.m).</p> <h2 id="what-sensor-measurements-does-it-use"><a href="#what-sensor-measurements-does-it-use" class="header-anchor">#</a> What sensor measurements does it use?</h2> <p>The EKF has different modes of operation that allow for different combinations of sensor measurements.
On start-up the filter checks for a minimum viable combination of sensors and after initial tilt, yaw and height alignment is completed, enters a mode that provides rotation, vertical velocity, vertical position, IMU delta angle bias and IMU delta velocity bias estimates.</p> <p>This mode requires IMU data, a source of yaw (magnetometer or external vision) and a source of height data.
This minimum data set is required for all EKF modes of operation. Other sensor data can then be used to estimate additional states.</p> <h3 id="imu"><a href="#imu" class="header-anchor">#</a> IMU</h3> <ul><li>Three axis body fixed Inertial Measurement unit delta angle and delta velocity data at a minimum rate of 100Hz.
Note: Coning corrections should be applied to the IMU delta angle data before it is used by the EKF.</li></ul> <h3 id="magnetometer"><a href="#magnetometer" class="header-anchor">#</a> Magnetometer</h3> <p>Three axis body fixed magnetometer data (or external vision system pose data) at a minimum rate of 5Hz is required. Magnetometer data can be used in two ways:</p> <ul><li>Magnetometer measurements are converted to a yaw angle using the tilt estimate and magnetic declination.
This yaw angle is then used as an observation by the EKF.
This method is less accurate and does not allow for learning of body frame field offsets, however it is more robust to magnetic anomalies and large start-up gyro biases.
It is the default method used during start-up and on ground.</li> <li>The XYZ magnetometer readings are used as separate observations.
This method is more accurate and allows body frame offsets to be learned, but assumes the earth magnetic field environment only changes slowly and performs less well when there are significant external magnetic anomalies.</li></ul> <p>The logic used to select these modes is set by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_MAG_TYPE">EKF2_MAG_TYPE</a> parameter.</p> <p>The option is available to operate without a magnetometer, either by replacing it using <a href="#yaw_measurements">yaw from a dual antenna GPS</a> or using the IMU measurements and GPS velocity data to <a href="#yaw_from_gps_velocity">estimate yaw from vehicle movement</a>.</p> <h3 id="height"><a href="#height" class="header-anchor">#</a> Height</h3> <p>A source of height data - either GPS, barometric pressure, range finder or external vision at a minimum rate of 5Hz is required.</p> <blockquote><p><strong>Note</strong> The primary source of height data is controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> parameter.</p></blockquote> <p>If these measurements are not present, the EKF will not start.
When these measurements have been detected, the EKF will initialise the states and complete the tilt and yaw alignment.
When tilt and yaw alignment is complete, the EKF can then transition to other modes of operation enabling use of additional sensor data:</p> <h4 id="correction-for-static-pressure-position-error"><a href="#correction-for-static-pressure-position-error" class="header-anchor">#</a> Correction for Static Pressure Position Error</h4> <p>Barometric pressure altitude is subject to errors generated by aerodynamic disturbances caused by vehicle wind relative velocity and orientation.
This is known in aeronautics as <em>static pressure position error</em>.
The EKF2 module that uses the ECL/EKF2 estimator library provides a method of compensating for these errors, provided wind speed state estimation is active.</p> <p>For platforms operating in a fixed wing mode, wind speed state estimation requires either <a href="#airspeed">Airspeed</a> and/or <a href="#synthetic-sideslip">Synthetic Sideslip</a> fusion to be enabled.</p> <p>For multi-rotors, fusion of <a href="#mc_wind_estimation_using_drag">Drag Specific Forces</a> can be enabled and tuned to provide the required wind velocity state estimates.</p> <p>The EKF2 module models the error as a body fixed ellipsoid that specifies the fraction of dynamic pressure that is added to/subtracted from the barometric pressure - before it is converted to a height estimate.
See the following parameter documentation for information on how to use this feature:</p> <ul><li><a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_PCOEF_XP">EKF2_PCOEF_XP</a></li> <li><a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_PCOEF_XN">EKF2_PCOEF_XN</a></li> <li><a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_PCOEF_YP">EKF2_PCOEF_YP</a></li> <li><a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_PCOEF_YN">EKF2_PCOEF_YN</a></li> <li><a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_PCOEF_Z">EKF2_PCOEF_Z</a></li></ul> <h3 id="gps"><a href="#gps" class="header-anchor">#</a> GPS</h3> <h4 id="position-and-velocity-measurements"><a href="#position-and-velocity-measurements" class="header-anchor">#</a> Position and Velocity Measurements</h4> <p>GPS measurements will be used for position and velocity if the following conditions are met:</p> <ul><li>GPS use is enabled via setting of the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter.</li> <li>GPS quality checks have passed.
These checks are controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_CHECK">EKF2_GPS_CHECK</a> and <code>EKF2_REQ_*</code> parameters.</li> <li>GPS height can be used directly by the EKF via setting of the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> parameter.</li></ul> <p><span id="yaw_measurements"></span></p> <h4 id="yaw-measurements"><a href="#yaw-measurements" class="header-anchor">#</a> Yaw Measurements</h4> <p>Some GPS receivers such as the <a href="https://www.trimble.com/Precision-GNSS/MB-Two-Board.aspx" target="_blank" rel="noopener noreferrer">Trimble MB-Two RTK GPS receiver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can be used to provide a heading measurement that replaces the use of magnetometer data.
This can be a significant advantage when operating in an environment where large magnetic anomalies are present, or at latitudes here the earth's magnetic field has a high inclination.
Use of GPS yaw measurements is enabled by setting bit position 7 to 1 (adding 128) in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter.</p> <p><span id="yaw_from_gps_velocity"></span></p> <h4 id="yaw-from-gps-velocity"><a href="#yaw-from-gps-velocity" class="header-anchor">#</a> Yaw From GPS Velocity</h4> <p>The EKF runs an additional multi-hypothesis filter internally that uses multiple 3-state Extended Kalman Filters (EKF's) whose states are NE velocity and yaw angle.
These individual yaw angle estimates are then combined using a Gaussian Sum Filter (GSF). The individual 3-state EKF's use IMU and GPS horizontal velocity data (plus optional airspeed data) and do not rely on any prior knowledge of the yaw angle or magnetometer measurements.
This provides a backup to the yaw from the main filter and is used to reset the yaw for the main 24-state EKF when a post-takeoff loss of navigation indicates that the yaw estimate from the magnetometer is bad.
This will result in an <code>Emergency yaw reset - magnetometer use stopped</code> message information message at the GCS.</p> <p>Data from this estimator is logged when ekf2 replay logging is enabled and can be viewed in the <code>yaw_estimator_status</code> message.
The individual yaw estimates from the individual 3-state EKF yaw estimators are in the <code>yaw</code> fields.
The GSF combined yaw estimate is in the <code>yaw_composite</code> field.
The variance for the GSF yaw estimate is in the <code>yaw_variance</code> field.
All angles are in radians.
Weightings applied by the GSF to the individual 3-state EKF outputs are in the<code>weight</code> fields.</p> <p>This also makes it possible to operate without any magnetometer data or dual antenna GPS receiver for yaw provided some horizontal movement after takeoff can be performed to enable the yaw to become observable.
To use this feature, set <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_MAG_TYPE">EKF2_MAG_TYPE</a> to <code>none</code> (5) to disable magnetometer use.
Once the vehicle has performed sufficient horizontal movement to make the yaw observable, the main 24-state EKF will align it's yaw to the GSF estimate and commence use of GPS.</p> <h4 id="dual-receivers"><a href="#dual-receivers" class="header-anchor">#</a> Dual Receivers</h4> <p>Data from GPS receivers can be blended using an algorithm that weights data based on reported accuracy (this works best if both receivers output data at the same rate and use the same accuracy).
The mechanism also provides automatic failover if data from a receiver is lost (it allows, for example, a standard GPS to be used as a backup to a more accurate RTK receiver).
This is controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_MASK">EKF2_GPS_MASK</a> parameter.</p> <p>The <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_MASK">EKF2_GPS_MASK</a> parameter is set by default to disable blending and always use the first receiver, so it will have to be set to select which receiver accuracy metrics are used to decide how much each receiver output contributes to the blended solution.
Where different receiver models are used, it is important that the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_MASK">EKF2_GPS_MASK</a> parameter is set to a value that uses accuracy metrics that are supported by both receivers.
For example do not set bit position 0 to <code>true</code> unless the drivers for both receivers publish values in the <code>s_variance_m_s</code> field of the <code>vehicle_gps_position</code> message that are comparable.
This can be difficult with receivers from different manufacturers due to the different way that accuracy is defined, e.g. CEP vs 1-sigma, etc.</p> <p>The following items should be checked during setup:</p> <ul><li>Verify that data for the second receiver is present.
This will be logged as <code>vehicle_gps_position_1</code> and can also be checked when connected via the <em>nsh console</em> using the command <code>listener vehicle_gps_position -i 1</code>.
The <a href="/v1.testing/en/advanced_config/parameter_reference.html#GPS_2_CONFIG">GPS_2_CONFIG</a> parameter will need to be set correctly.</li> <li>Check the <code>s_variance_m_s</code>, <code>eph</code> and <code>epv</code> data from each receiver and decide which accuracy metrics can be used.
If both receivers output sensible <code>s_variance_m_s</code> and <code>eph</code> data, and GPS vertical position is not being used directly for navigation, then setting <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_MASK">EKF2_GPS_MASK</a> to 3 is recommended.
Where only <code>eph</code> data is available and both receivers do not output <code>s_variance_m_s</code> data, set <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_MASK">EKF2_GPS_MASK</a> to 2.
Bit position 2 would only be set if the GPS had been selected as a primary height source with the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> parameter and both receivers output sensible <code>epv</code> data.</li> <li>The output from the blended receiver data is logged as <code>ekf_gps_position</code>, and can be checked whilst connect via the nsh terminal using the command <code>listener ekf_gps_position</code>.</li> <li>Where receivers output at different rates, the blended output will be at the rate of slower receiver.
Where possible receivers should be configured to output at the same rate.</li></ul> <h4 id="gps-performance-requirements"><a href="#gps-performance-requirements" class="header-anchor">#</a> GPS Performance Requirements</h4> <p>For the ECL to accept GPS data for navigation, certain minimum requirements need to be satisfied over a period of 10 seconds (minimums are defined in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_EPH">EKF2_REQ_*</a> parameters)</p> <p>The table below shows the different metrics directly reported or calculated from the GPS data, and the minimum required values for the data to be used by ECL.
In addition, the <em>Average Value</em> column shows typical values that might reasonably be obtained from a standard GNSS module (e.g. uBlox M8 series) - i.e. values that are considered good/acceptable.</p> <table><thead><tr><th>Metric</th> <th>Minimum required</th> <th>Average Value</th> <th>Units</th> <th>Notes</th></tr></thead> <tbody><tr><td>eph</td> <td>3 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_EPH">EKF2_REQ_EPH</a>)</td> <td>0.8</td> <td>m</td> <td>Standard deviation of horizontal position error</td></tr> <tr><td>epv</td> <td>5 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_EPV">EKF2_REQ_EPV</a>)</td> <td>1.5</td> <td>m</td> <td>Standard deviation of vertical position error</td></tr> <tr><td>Number of satellites</td> <td>6 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_NSATS">EKF2_REQ_NSATS</a>)</td> <td>14</td> <td>-</td> <td></td></tr> <tr><td>Speed variance</td> <td>0.5</td> <td>0.3</td> <td>m/s</td> <td></td></tr> <tr><td>Fix type</td> <td>3</td> <td>4</td> <td>-</td> <td></td></tr> <tr><td>hpos_drift_rate</td> <td>0.1 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_HDRIFT">EKF2_REQ_HDRIFT</a>)</td> <td>0.01</td> <td>m/s</td> <td>Drift rate calculated from reported GPS position (when stationary).</td></tr> <tr><td>vpos_drift_rate</td> <td>0.2 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_VDRIFT">EKF2_REQ_VDRIFT</a>)</td> <td>0.02</td> <td>m/s</td> <td>Drift rate calculated from reported GPS altitude (when stationary).</td></tr> <tr><td>hspd</td> <td>0.1 (<a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_REQ_SACC">EKF2_REQ_SACC</a>)</td> <td>0.01</td> <td>m/s</td> <td>Filtered magnitude of reported GPS horizontal velocity.</td></tr></tbody></table> <blockquote><p><strong>Note</strong> The <code>hpos_drift_rate</code>, <code>vpos_drift_rate</code> and <code>hspd</code> are calculated over a period of 10 seconds and published in the <code>ekf2_gps_drift</code> topic. Note that <code>ekf2_gps_drift</code> is not logged!</p></blockquote> <h3 id="range-finder"><a href="#range-finder" class="header-anchor">#</a> Range Finder</h3> <p>Range finder distance to ground is used by a single state filter to estimate the vertical position of the terrain relative to the height datum.</p> <p>If operating over a flat surface that can be used as a zero height datum, the range finder data can also be used directly by the EKF to estimate height by setting the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> parameter to 2.</p> <h3 id="airspeed"><a href="#airspeed" class="header-anchor">#</a> Airspeed</h3> <p>Equivalent Airspeed (EAS) data can be used to estimate wind velocity and reduce drift when GPS is lost by setting <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_ARSP_THR">EKF2_ARSP_THR</a> to a positive value.
Airspeed data will be used when it exceeds the threshold set by a positive value for <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_ARSP_THR">EKF2_ARSP_THR</a> and the vehicle type is not rotary wing.</p> <h3 id="synthetic-sideslip"><a href="#synthetic-sideslip" class="header-anchor">#</a> Synthetic Sideslip</h3> <p>Fixed wing platforms can take advantage of an assumed sideslip observation of zero to improve wind speed estimation and also enable wind speed estimation without an airspeed sensor.
This is enabled by setting the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_FUSE_BETA">EKF2_FUSE_BETA</a> parameter to 1.</p> <p><span id="mc_wind_estimation_using_drag"></span></p> <h3 id="multicopter-wind-estimation-using-drag-specific-forces"><a href="#multicopter-wind-estimation-using-drag-specific-forces" class="header-anchor">#</a> Multicopter Wind Estimation using Drag Specific Forces</h3> <p>Multi-rotor platforms can take advantage of the relationship between airspeed and drag force along the X and Y body axes to estimate North/East components of wind velocity.
This is enabled by setting bit position 5 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter to true.
The relationship between airspeed and specific force (IMU acceleration) along the X and Y body axes is controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_BCOEF_X">EKF2_BCOEF_X</a> and <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_BCOEF_Y">EKF2_BCOEF_Y</a> parameters which set the ballistic coefficients for flight in the X and Y directions respectively.
The amount of specific force observation noise is set by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_DRAG_NOISE">EKF2_DRAG_NOISE</a> parameter.</p> <p>These can be tuned by flying the vehicle in <a href="/v1.testing/en/flight_modes/position_mc.html">Position mode</a> repeatedly forwards/backwards between rest and maximum maximum speed, adjusting <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_BCOEF_X">EKF2_BCOEF_X</a> so that the corresponding innovation sequence in the <code>ekf2_innovations_0.drag_innov[0]</code> log message is minimised.
This is then repeated for right/left movement with adjustment of <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_BCOEF_Y">EKF2_BCOEF_Y</a> to minimise the <code>ekf2_innovations_0.drag_innov[1]</code> innovation sequence.
Tuning is easier if this testing is conducted in still conditions.</p> <p>If you are able to log data without dropouts from boot using <a href="/v1.testing/en/advanced_config/parameter_reference.html#SDLOG_MODE">SDLOG_MODE = 1</a> and <a href="/v1.testing/en/advanced_config/parameter_reference.html#SDLOG_PROFILE">SDLOG_PROFILE = 2</a>, have access to the development environment, and are able to build code, then we recommended you fly <em>once</em> and perform the tuning on logs generated via <a href="https://dev.px4.io/master/en/debug/system_wide_replay.html#ekf2-replay" target="_blank" rel="noopener noreferrer">EKF2 Replay<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of the flight data.</p> <h3 id="optical-flow"><a href="#optical-flow" class="header-anchor">#</a> Optical Flow</h3> <p>Optical flow data will be used if the following conditions are met:</p> <ul><li>Valid range finder data is available.</li> <li>Bit position 1 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter is true.</li> <li>The quality metric returned by the flow sensor is greater than the minimum requirement set by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_OF_QMIN">EKF2_OF_QMIN</a> parameter.</li></ul> <p><span id="ekf2_extvis"></span></p> <h3 id="external-vision-system"><a href="#external-vision-system" class="header-anchor">#</a> External Vision System</h3> <p>Position, velocity or orientation measurements from an external vision system, e.g. Vicon, can be used:</p> <ul><li>External vision system horizontal position data will be used if bit position 3 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter is true.</li> <li>External vision system vertical position data will be used if the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> parameter is set to 3.</li> <li>External vision system velocity data will be used if bit position 8 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter is true.</li> <li>External vision system orientation data will be used for yaw estimation if bit position 4 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter is true.</li> <li>External vision reference frame offset will be estimated and used to rotate the external vision system data if bit position 6 in the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> parameter is true.</li></ul> <p>Either bit 4 (<code>EV_YAW</code>) or bit 6 (<code>EV_ROTATE</code>) should be set to true, but not both together.
Following <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> values are supported when using with an external vision system.</p> <table><thead><tr><th>EKF_AID_MASK value</th> <th>Set bits</th> <th>Description</th></tr></thead> <tbody><tr><td>321</td> <td>GPS + EV_VEL + ROTATE_EV</td> <td>Heading w.r.t. North (<strong>Recommended</strong>)</td></tr> <tr><td>73</td> <td>GPS + EV_POS + ROTATE_EV</td> <td>Heading w.r.t. North (<em>Not recommended</em>, use <code>EV_VEL</code> instead)</td></tr> <tr><td>24</td> <td>EV_POS + EV_YAW</td> <td>Heading w.r.t. external vision frame</td></tr> <tr><td>72</td> <td>EV_POS + ROTATE_EV</td> <td>Heading w.r.t. North</td></tr> <tr><td>272</td> <td>EV_VEL + EV_YAW</td> <td>Heading w.r.t. external vision frame</td></tr> <tr><td>320</td> <td>EV_VEL + ROTATE_EV</td> <td>Heading w.r.t. North</td></tr> <tr><td>280</td> <td>EV_POS + EV_VEL + EV_YAW</td> <td>Heading w.r.t. external vision frame</td></tr> <tr><td>328</td> <td>EV_POS + EV_VEL + ROTATE_EV</td> <td>Heading w.r.t. North</td></tr></tbody></table> <p>The EKF considers uncertainty in the visual pose estimate.
This uncertainty information can be sent via the covariance fields in the MAVLink <a href="https://mavlink.io/en/messages/common.html#ODOMETRY" target="_blank" rel="noopener noreferrer">ODOMETRY<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> message or it can be set through the parameters <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_EVP_NOISE">EKF2_EVP_NOISE</a>, <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_EVV_NOISE">EKF2_EVV_NOISE</a> and <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_EVA_NOISE">EKF2_EVA_NOISE</a>.
You can choose the source of the uncertainty with <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_EV_NOISE_MD">EKF2_EV_NOISE_MD</a>.</p> <h2 id="how-do-i-use-the-ecl-library-ekf"><a href="#how-do-i-use-the-ecl-library-ekf" class="header-anchor">#</a> How do I use the 'ecl' library EKF?</h2> <p>Set the <a href="/v1.testing/en/advanced_config/parameter_reference.html#SYS_MC_EST_GROUP">SYS_MC_EST_GROUP</a> parameter to 2 to use the ecl EKF.</p> <h2 id="what-are-the-advantages-and-disadvantages-of-the-ecl-ekf-over-other-estimators"><a href="#what-are-the-advantages-and-disadvantages-of-the-ecl-ekf-over-other-estimators" class="header-anchor">#</a> What are the advantages and disadvantages of the ecl EKF over other estimators?</h2> <p>Like all estimators, much of the performance comes from the tuning to match sensor characteristics.
Tuning is a compromise between accuracy and robustness and although we have attempted to provide a tune that meets the needs of most users, there will be applications where tuning changes are required.</p> <p>For this reason, no claims for accuracy relative to the legacy combination of <code>attitude_estimator_q</code> + <code>local_position_estimator</code> have been made and the best choice of estimator will depend on the application and tuning.</p> <h3 id="disadvantages"><a href="#disadvantages" class="header-anchor">#</a> Disadvantages</h3> <ul><li>The ecl EKF is a complex algorithm that requires a good understanding of extended Kalman filter theory and its application to navigation problems to tune successfully.
It is therefore more difficult for users that are not achieving good results to know what to change.</li> <li>The ecl EKF uses more RAM and flash space.</li> <li>The ecl EKF uses more logging space.</li></ul> <h3 id="advantages"><a href="#advantages" class="header-anchor">#</a> Advantages</h3> <ul><li>The ecl EKF is able to fuse data from sensors with different time delays and data rates in a mathematically consistent way which improves accuracy during dynamic maneuvers once time delay parameters are set correctly.</li> <li>The ecl EKF is capable of fusing a large range of different sensor types.</li> <li>The ecl EKF detects and reports statistically significant inconsistencies in sensor data, assisting with diagnosis of sensor errors.</li> <li>For fixed wing operation, the ecl EKF estimates wind speed with or without an airspeed sensor and is able to use the estimated wind in combination with airspeed measurements and sideslip assumptions to extend the dead-reckoning time available if GPS is lost in flight.</li> <li>The ecl EKF estimates 3-axis accelerometer bias which improves accuracy for tailsitters and other vehicles that experience large attitude changes between flight phases.</li> <li>The federated architecture (combined attitude and position/velocity estimation) means that attitude estimation benefits from all sensor measurements.
This should provide the potential for improved attitude estimation if tuned correctly.</li></ul> <h2 id="how-do-i-check-the-ekf-performance"><a href="#how-do-i-check-the-ekf-performance" class="header-anchor">#</a> How do I check the EKF performance?</h2> <p>EKF outputs, states and status data are published to a number of uORB topics which are logged to the SD card during flight.
The following guide assumes that data has been logged using the <em>.ulog file format</em>.
The <strong>.ulog</strong> format data can be parsed in python by using the <a href="https://github.com/PX4/pyulog" target="_blank" rel="noopener noreferrer">PX4 pyulog library<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Most of the EKF data is found in the <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_innovations.msg" target="_blank" rel="noopener noreferrer">estimator_innovations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> uORB messages that are logged to the .ulog file.</p> <p>A python script that automatically generates analysis plots and metadata can be found <a href="https://github.com/PX4/Firmware/blob/master/Tools/ecl_ekf/process_logdata_ekf.py" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
To use this script file, cd to the <code>Tools/ecl_ekf</code> directory and enter <code>python process_logdata_ekf.py &lt;log_file.ulg&gt;</code>.
This saves performance metadata in a csv file named <strong>&lt;log_file&gt;.mdat.csv</strong> and plots in a pdf file named <code>&lt;log_file&gt;.pdf</code>.</p> <p>Multiple log files in a directory can be analysed using the <a href="https://github.com/PX4/Firmware/blob/master/Tools/ecl_ekf/batch_process_logdata_ekf.py" target="_blank" rel="noopener noreferrer">batch_process_logdata_ekf.py<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script.
When this has been done, the performance metadata files can be processed to provide a statistical assessment of the estimator performance across the population of logs using the <a href="https://github.com/PX4/Firmware/blob/master/Tools/ecl_ekf/batch_process_metadata_ekf.py" target="_blank" rel="noopener noreferrer">batch_process_metadata_ekf.py<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script.</p> <h3 id="output-data"><a href="#output-data" class="header-anchor">#</a> Output Data</h3> <ul><li>Attitude output data is found in the <a href="https://github.com/PX4/Firmware/blob/master/msg/vehicle_attitude.msg" target="_blank" rel="noopener noreferrer">vehicle_attitude<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> message.</li> <li>Local position output data is found in the <a href="https://github.com/PX4/Firmware/blob/master/msg/vehicle_local_position.msg" target="_blank" rel="noopener noreferrer">vehicle_local_position<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> message.</li> <li>Global (WGS-84) output data is found in the <a href="https://github.com/PX4/Firmware/blob/master/msg/vehicle_global_position.msg" target="_blank" rel="noopener noreferrer">vehicle_global_position<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> message.</li> <li>Wind velocity output data is found in the <a href="https://github.com/PX4/Firmware/blob/master/msg/wind_estimate.msg" target="_blank" rel="noopener noreferrer">wind_estimate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> message.</li></ul> <h3 id="states"><a href="#states" class="header-anchor">#</a> States</h3> <p>Refer to states[32] in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
The index map for states[32] is as follows:</p> <ul><li>[0 ... 3] Quaternions</li> <li>[4 ... 6] Velocity NED (m/s)</li> <li>[7 ... 9] Position NED (m)</li> <li>[10 ... 12] IMU delta angle bias XYZ (rad)</li> <li>[13 ... 15] IMU delta velocity bias XYZ (m/s)</li> <li>[16 ... 18] Earth magnetic field NED (gauss)</li> <li>[19 ... 21] Body magnetic field XYZ (gauss)</li> <li>[22 ... 23] Wind velocity NE (m/s)</li> <li>[24 ... 32] Not Used</li></ul> <h3 id="state-variances"><a href="#state-variances" class="header-anchor">#</a> State Variances</h3> <p>Refer to covariances[28] in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
The index map for covariances[28] is as follows:</p> <ul><li>[0 ... 3] Quaternions</li> <li>[4 ... 6] Velocity NED (m/s)^2</li> <li>[7 ... 9] Position NED (m^2)</li> <li>[10 ... 12] IMU delta angle bias XYZ (rad^2)</li> <li>[13 ... 15] IMU delta velocity bias XYZ (m/s)^2</li> <li>[16 ... 18] Earth magnetic field NED (gauss^2)</li> <li>[19 ... 21] Body magnetic field XYZ (gauss^2)</li> <li>[22 ... 23] Wind velocity NE (m/s)^2</li> <li>[24 ... 28] Not Used</li></ul> <h3 id="observation-innovations-innovation-variances"><a href="#observation-innovations-innovation-variances" class="header-anchor">#</a> Observation Innovations &amp; Innovation Variances</h3> <p>The observation <code>estimator_innovations</code>, <code>estimator_innovation_variances</code>, and <code>estimator_innovation_test_ratios</code> message fields are defined in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_innovations.msg" target="_blank" rel="noopener noreferrer">estimator_innovations.msg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
The messages all have the same field names/types (but different units).</p> <blockquote><p><strong>Note</strong> The messages have the same fields because they are generated from the same field definition.
The <code># TOPICS</code> line (at the end of <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_innovations.msg" target="_blank" rel="noopener noreferrer">the file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) lists the names of the set of messages to be created):</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code># TOPICS estimator_innovations estimator_innovation_variances estimator_innovation_test_ratios
</code></pre></div><p>Some of the observations are:</p> <ul><li>Magnetometer XYZ (gauss, gauss^2) : <code>mag_field[3]</code></li> <li>Yaw angle (rad, rad^2) : <code>heading</code></li> <li>True Airspeed (m/s, (m/s)^2) : <code>airspeed</code></li> <li>Synthetic sideslip (rad, rad^2) : <code>beta</code></li> <li>Optical flow XY (rad/sec, (rad/s)^2) : <code>flow</code></li> <li>Height above ground (m, m^2) : <code>hagl</code></li> <li>Drag specific force ((m/s)^2): <code>drag</code></li> <li>Velocity and position innovations : per sensor</li></ul> <p>In addition, each sensor has its own fields for horizontal and vertical position and/or velocity values (where appropriate).
These are largely self documenting, and are reproduced below:</p> <div class="language- extra-class"><pre class="language-text"><code># GPS
float32[2] gps_hvel	# horizontal GPS velocity innovation (m/sec) and innovation variance ((m/sec)**2)
float32    gps_vvel	# vertical GPS velocity innovation (m/sec) and innovation variance ((m/sec)**2)
float32[2] gps_hpos	# horizontal GPS position innovation (m) and innovation variance (m**2)
float32    gps_vpos	# vertical GPS position innovation (m) and innovation variance (m**2)
# External Vision
float32[2] ev_hvel	# horizontal external vision velocity innovation (m/sec) and innovation variance ((m/sec)**2)
float32    ev_vvel	# vertical external vision velocity innovation (m/sec) and innovation variance ((m/sec)**2)
float32[2] ev_hpos	# horizontal external vision position innovation (m) and innovation variance (m**2)
float32    ev_vpos	# vertical external vision position innovation (m) and innovation variance (m**2)
# Fake Position and Velocity
float32[2] fake_hvel	# fake horizontal velocity innovation (m/s) and innovation variance ((m/s)**2)
float32    fake_vvel	# fake vertical velocity innovation (m/s) and innovation variance ((m/s)**2)
float32[2] fake_hpos	# fake horizontal position innovation (m) and innovation variance (m**2)
float32    fake_vpos	# fake vertical position innovation (m) and innovation variance (m**2)
# Height sensors
float32 rng_vpos	# range sensor height innovation (m) and innovation variance (m**2)
float32 baro_vpos	# barometer height innovation (m) and innovation variance (m**2)
# Auxiliary velocity
float32[2] aux_hvel	# horizontal auxiliar velocity innovation from landing target measurement (m/sec) and innovation variance ((m/sec)**2)
float32    aux_vvel	# vertical auxiliar velocity innovation from landing target measurement (m/sec) and innovation variance ((m/sec)**2)
</code></pre></div><h3 id="output-complementary-filter"><a href="#output-complementary-filter" class="header-anchor">#</a> Output Complementary Filter</h3> <p>The output complementary filter is used to propagate states forward from the fusion time horizon to current time.
To check the magnitude of the angular, velocity and position tracking errors measured at the fusion time horizon, refer to <code>output_tracking_error[3]</code> in the <code>ekf2_innovations</code> message.</p> <p>The index map is as follows:</p> <ul><li>[0] Angular tracking error magnitude (rad)</li> <li>[1] Velocity tracking error magnitude (m/s).
The velocity tracking time constant can be adjusted using the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_TAU_VEL">EKF2_TAU_VEL</a> parameter.
Reducing this parameter reduces steady state errors but increases the amount of observation noise on the NED velocity outputs.</li> <li>[2] Position tracking error magnitude (m).
The position tracking time constant can be adjusted using the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_TAU_POS">EKF2_TAU_POS</a> parameter.
Reducing this parameter reduces steady state errors but increases the amount of observation noise on the NED position outputs.</li></ul> <h3 id="ekf-errors"><a href="#ekf-errors" class="header-anchor">#</a> EKF Errors</h3> <p>The EKF contains internal error checking for badly conditioned state and covariance updates.
Refer to the filter_fault_flags in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="observation-errors"><a href="#observation-errors" class="header-anchor">#</a> Observation Errors</h3> <p>There are two categories of observation faults:</p> <ul><li>Loss of data.
An example of this is a range finder failing to provide a return.</li> <li>The innovation, which is the difference between the state prediction and sensor observation is excessive.
An example of this is excessive vibration causing a large vertical position error, resulting in the barometer height measurement being rejected.</li></ul> <p>Both of these can result in observation data being rejected for long enough to cause the EKF to attempt a reset of the states using the sensor observations.
All observations have a statistical confidence checks applied to the innovations.
The number of standard deviations for the check are controlled by the <code>EKF2_*_GATE</code> parameter for each observation type.</p> <p>Test levels are  available in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as follows:</p> <ul><li><code>mag_test_ratio</code>: ratio of the largest magnetometer innovation component to the innovation test limit</li> <li><code>vel_test_ratio</code>: ratio of the largest velocity innovation component to the innovation test limit</li> <li><code>pos_test_ratio</code>: ratio of the largest horizontal position innovation component to the innovation test limit</li> <li><code>hgt_test_ratio</code>: ratio of the vertical position innovation to the innovation test limit</li> <li><code>tas_test_ratio</code>: ratio of the true airspeed innovation to the innovation test limit</li> <li><code>hagl_test_ratio</code>: ratio of the height above ground innovation to the innovation test limit</li></ul> <p>For a binary pass/fail summary for each sensor, refer to innovation_check_flags in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="gps-quality-checks"><a href="#gps-quality-checks" class="header-anchor">#</a> GPS Quality Checks</h3> <p>The EKF applies a number of GPS quality checks before commencing GPS aiding.
These checks are controlled by the <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GPS_CHECK">EKF2_GPS_CHECK</a> and <code>EKF2_REQ_*</code> parameters.
The pass/fail status for these checks is logged in the <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.gps_check_fail_flags message.
This integer will be zero when all required GPS checks have passed.
If the EKF is not commencing GPS alignment, check the value of the integer against the bitmask definition <code>gps_check_fail_flags</code> in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="ekf-numerical-errors"><a href="#ekf-numerical-errors" class="header-anchor">#</a> EKF Numerical Errors</h3> <p>The EKF uses single precision floating point operations for all of its computations and first order approximations for derivation of the covariance prediction and update equations in order to reduce processing requirements.
This means that it is possible when re-tuning the EKF to encounter conditions where the covariance matrix operations become badly conditioned enough to cause divergence or significant errors in the state estimates.</p> <p>To prevent this, every covariance and state update step contains the following error detection and correction steps:</p> <ul><li>If the innovation variance is less than the observation variance (this requires a negative state variance which is impossible) or the covariance update will produce a negative variance for any of the states, then:
<ul><li>The state and covariance update is skipped</li> <li>The corresponding rows and columns in the covariance matrix are reset</li> <li>The failure is recorded in the <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> filter_fault_flags message</li></ul></li> <li>State variances (diagonals in the covariance matrix) are constrained to be non-negative.</li> <li>An upper limit is applied to state variances.</li> <li>Symmetry is forced on the covariance matrix.</li></ul> <p>After re-tuning the filter, particularly re-tuning that involve reducing the noise variables, the value of <code>estimator_status.gps_check_fail_flags</code> should be checked to ensure that it remains zero.</p> <h2 id="what-should-i-do-if-the-height-estimate-is-diverging"><a href="#what-should-i-do-if-the-height-estimate-is-diverging" class="header-anchor">#</a> What should I do if the height estimate is diverging?</h2> <p>The most common cause of EKF height diverging away from GPS and altimeter measurements during flight is clipping and/or aliasing of the IMU measurements caused by vibration.
If this is occurring, then the following signs should be evident in the data</p> <ul><li><a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_innovations.msg" target="_blank" rel="noopener noreferrer">estimator_innovations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vel_pos_innov[2] and  <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_innovations.msg" target="_blank" rel="noopener noreferrer">estimator_innovations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vel_pos_innov[5] will both have the same sign.</li> <li><a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.hgt_test_ratio will be greater than 1.0</li></ul> <p>The recommended first step is to ensure that the autopilot is isolated from the airframe using an effective isolation mounting system.
An isolation mount has 6 degrees of freedom, and therefore 6 resonant frequencies.
As a general rule, the 6 resonant frequencies of the autopilot on the isolation mount should be above 25Hz to avoid interaction with the autopilot dynamics and below the frequency of the motors.</p> <p>An isolation mount can make vibration worse if the resonant frequencies coincide with motor or propeller blade passage frequencies.</p> <p>The EKF can be made more resistant to vibration induced height divergence by making the following parameter changes:</p> <ul><li>Double the value of the innovation gate for the primary height sensor.
If using barometric height this is <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_BARO_GATE">EKF2_BARO_GATE</a>.</li> <li>Increase the value of <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_ACC_NOISE">EKF2_ACC_NOISE</a> to 0.5 initially.
If divergence is still occurring, increase in further increments of 0.1 but do not go above 1.0</li></ul> <p>Note that the effect of these changes will make the EKF more sensitive to errors in GPS vertical velocity and barometric pressure.</p> <h2 id="what-should-i-do-if-the-position-estimate-is-diverging"><a href="#what-should-i-do-if-the-position-estimate-is-diverging" class="header-anchor">#</a> What should I do if the position estimate is diverging?</h2> <p>The most common causes of position divergence are:</p> <ul><li>High vibration levels.
<ul><li>Fix by improving mechanical isolation of the autopilot.</li> <li>Increasing the value of <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_ACC_NOISE">EKF2_ACC_NOISE</a> and <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GYR_NOISE">EKF2_GYR_NOISE</a> can help, but does make the EKF more vulnerable to GPS glitches.</li></ul></li> <li>Large gyro bias offsets.
<ul><li>Fix by re-calibrating the gyro.
Check for excessive temperature sensitivity (&gt; 3 deg/sec bias change during warm-up from a cold start and replace the sensor if affected of insulate to to slow the rate of temperature change.</li></ul></li> <li>Bad yaw alignment
<ul><li>Check the magnetometer calibration and alignment.</li> <li>Check the heading shown QGC is within within 15 deg truth</li></ul></li> <li>Poor GPS accuracy
<ul><li>Check for interference</li> <li>Improve separation and shielding</li> <li>Check flying location for GPS signal obstructions and reflectors (nearby tall buildings)</li></ul></li> <li>Loss of GPS</li></ul> <p>Determining which of these is the primary cause requires a methodical approach to analysis of the EKF log data:</p> <ul><li>Plot the velocity innovation test ratio - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vel_test_ratio</li> <li>Plot the horizontal position innovation test ratio - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.pos_test_ratio</li> <li>Plot the height innovation test ratio - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.hgt_test_ratio</li> <li>Plot the magnetometer innovation test ratio - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.mag_test_ratio</li> <li>Plot the GPS receiver reported speed accuracy - <a href="https://github.com/PX4/Firmware/blob/master/msg/vehicle_gps_position.msg" target="_blank" rel="noopener noreferrer">vehicle_gps_position<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.s_variance_m_s</li> <li>Plot the IMU delta angle state estimates - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.states[10], states[11] and states[12]</li> <li>Plot the EKF internal high frequency vibration metrics:
<ul><li>Delta angle coning vibration - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vibe[0]</li> <li>High frequency delta angle vibration - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vibe[1]</li> <li>High frequency delta velocity vibration - <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vibe[2]</li></ul></li></ul> <p>During normal operation, all the test ratios should remain below 0.5 with only occasional spikes above this as shown in the example below from a successful flight:</p> <p><img src="/v1.testing/assets/img/test_ratios_-_successful.38528960.png" alt="Position, Velocity, Height and Magnetometer Test Ratios"></p> <p>The following plot shows the EKF vibration metrics for a multirotor with good isolation.
The landing shock and the increased vibration during takeoff and landing can be seen.
Insufficient data has been gathered with these metrics to provide specific advice on maximum thresholds.</p> <p><img src="/v1.testing/assets/img/vibration_metrics_-_successful.3c7eb27c.png" alt="Vibration metrics - successful"></p> <p>The above vibration metrics are of limited value as the presence of vibration at a frequency close to the IMU sampling frequency (1 kHz for most boards) will cause offsets to appear in the data that do not show up in the high frequency vibration metrics.
The only way to detect aliasing errors is in their effect on inertial navigation accuracy and the rise in innovation levels.</p> <p>In addition to generating large position and velocity test ratios of &gt; 1.0, the different error mechanisms affect the other test ratios in different ways:</p> <h3 id="determination-of-excessive-vibration"><a href="#determination-of-excessive-vibration" class="header-anchor">#</a> Determination of Excessive Vibration</h3> <p>High vibration levels normally affect vertical position and velocity innovations as well as the horizontal components.
Magnetometer test levels are only affected to a small extent.</p> <p>(insert example plots showing bad vibration here)</p> <h3 id="determination-of-excessive-gyro-bias"><a href="#determination-of-excessive-gyro-bias" class="header-anchor">#</a> Determination of Excessive Gyro Bias</h3> <p>Large gyro bias offsets are normally characterised by a change in the value of delta angle bias greater than 5E-4 during flight (equivalent to ~3 deg/sec) and can also cause a large increase in the magnetometer test ratio if the yaw axis is affected.
Height is normally unaffected other than extreme cases.
Switch on bias value of up to 5 deg/sec can be tolerated provided the filter is given time settle before flying.
Pre-flight checks performed by the commander should prevent arming if the position is diverging.</p> <p>(insert example plots showing bad gyro bias here)</p> <h3 id="determination-of-poor-yaw-accuracy"><a href="#determination-of-poor-yaw-accuracy" class="header-anchor">#</a> Determination of Poor Yaw Accuracy</h3> <p>Bad yaw alignment causes a velocity test ratio that increases rapidly when the vehicle starts moving due inconsistency in the direction of velocity calculated by the inertial nav and the GPS measurement.
Magnetometer innovations are slightly affected.
Height is normally unaffected.</p> <p>(insert example plots showing bad yaw alignment here)</p> <h3 id="determination-of-poor-gps-accuracy"><a href="#determination-of-poor-gps-accuracy" class="header-anchor">#</a> Determination of Poor GPS Accuracy</h3> <p>Poor GPS accuracy is normally accompanied by a rise in the reported velocity error of the receiver in conjunction with a rise in innovations.
Transient errors due to multipath, obscuration and interference are more common causes.
Here is an example of a temporary loss of GPS accuracy where the multi-rotor started drifting away from its loiter location and had to be corrected using the sticks.
The rise in <a href="https://github.com/PX4/Firmware/blob/master/msg/estimator_status.msg" target="_blank" rel="noopener noreferrer">estimator_status<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.vel_test_ratio to greater than 1 indicates the GPs velocity was inconsistent with other measurements and has been rejected.</p> <p><img src="/v1.testing/assets/img/gps_glitch_-_test_ratios.895621ad.png" alt="GPS glitch - test ratios"></p> <p>This is accompanied with rise in the GPS receivers reported velocity accuracy which indicates that it was likely a GPS error.</p> <p><img src="/v1.testing/assets/img/gps_glitch_-_reported_receiver_accuracy.cfeb6bc6.png" alt="GPS Glitch - reported receiver accuracy"></p> <p>If we also look at the GPS horizontal velocity innovations and innovation variances, we can see the large spike in North velocity innovation that accompanies this GPS 'glitch' event.</p> <p><img src="/v1.testing/assets/img/gps_glitch_-_velocity_innovations.92f99a14.png" alt="GPS Glitch - velocity innovations"></p> <h3 id="determination-of-gps-data-loss"><a href="#determination-of-gps-data-loss" class="header-anchor">#</a> Determination of GPS Data Loss</h3> <p>Loss of GPS data will be shown by the velocity and position innovation test ratios 'flat-lining'.
If this occurs, check the other GPS status data in <code>vehicle_gps_position</code> for further information.</p> <p>The following plot shows the NED GPS velocity innovations <code>ekf2_innovations_0.vel_pos_innov[0 ... 2]</code>, the GPS NE position innovations <code>ekf2_innovations_0.vel_pos_innov[3 ... 4]</code> and the Baro vertical position innovation <code>ekf2_innovations_0.vel_pos_innov[5]</code> generated from a simulated VTOL flight using SITL Gazebo.</p> <p>The simulated GPS was made to lose lock at 73 seconds.
Note the NED velocity innovations and NE position innovations 'flat-line' after GPS is lost.
Note that after 10 seconds without GPS data, the EKF reverts back to a static position mode using the last known position and the NE position innovations start to change again.</p> <p><img src="/v1.testing/assets/img/gps_data_loss_-_velocity_innovations.383dafa8.png" alt="GPS Data Loss - in SITL"></p> <h3 id="barometer-ground-effect-compensation"><a href="#barometer-ground-effect-compensation" class="header-anchor">#</a> Barometer Ground Effect Compensation</h3> <p>If the vehicle has the tendency during landing to climb back into the air when close to the ground, the most likely cause is barometer ground effect.</p> <p>This is caused when air pushed down by the propellers hits the ground and creates a high pressure zone below the drone.
The result is a lower reading of pressure altitude, leading to an unwanted climb being commanded.
The figure below shows a typical situation where the ground effect is present.
Note how the barometer signal dips at the beginning and end of the flight.</p> <p><img src="/v1.testing/assets/img/gnd_effect.46bc06d8.png" alt="Barometer ground effect"></p> <p>You can enable <em>ground effect compensation</em> to fix this problem:</p> <ul><li>From the plot estimate the magnitude of the barometer dip during takeoff or landing. In the plot above one can read a barometer dip of about 6 meters during landing.</li> <li>Then set the parameter <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GND_EFF_DZ">EKF2_GND_EFF_DZ</a> to that value and add a 10 percent margin. Therefore, in this case a value of 6.6 meters would be a good starting point.</li></ul> <p>If a terrain estimate is available (e.g. the vehicle is equipped with a range finder) then you can additionally specify <a href="/v1.testing/en/advanced_config/parameter_reference.html#EKF2_GND_MAX_HGT">EKF2_GND_MAX_HGT</a>, the above ground-level altitude below which ground effect compensation should be activated.
If no terrain estimate is available this parameter will have no effect and the system will use heuristics to determine if ground effect compensation should be activated.</p> <h2 id="further-information"><a href="#further-information" class="header-anchor">#</a> Further Information</h2> <ul><li><a href="https://youtu.be/HkYRJJoyBwQ" target="_blank" rel="noopener noreferrer">PX4 State Estimation Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <em>PX4 Developer Summit 2019</em>, Dr. Paul Riseborough): Overview of the estimator, and major changes from 2018/19, and the expected improvements through 2019/20.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/PX4/px4_user_guide/edit/master/en/advanced_config/tuning_the_ecl_ekf.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/1/2020, 3:42:00 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v1.testing/en/advanced_config/esc_calibration.html" class="prev">
        ESC Calibration
      </a></span> <span class="next"><a href="/v1.testing/en/advanced_config/flight_termination.html">
        Flight Termination Configuration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/v1.testing/assets/js/app.86f36f44.js" defer></script><script src="/v1.testing/assets/js/4.a66fe67b.js" defer></script><script src="/v1.testing/assets/js/71.e082acc6.js" defer></script>
  </body>
</html>
