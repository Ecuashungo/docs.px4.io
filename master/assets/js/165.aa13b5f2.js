(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{1293:function(e,t,r){e.exports=r.p+"assets/img/pixracer_network_setup_connection_windows.4b6c2413.png"},1294:function(e,t,r){e.exports=r.p+"assets/img/pixracer_network_setup_security_windows.646da5eb.png"},1295:function(e,t,r){e.exports=r.p+"assets/img/wifi_bridge.5e243a79.png"},1296:function(e,t,r){e.exports=r.p+"assets/img/esp8266_flashing_rig.900b6050.jpg"},1297:function(e,t,r){e.exports=r.p+"assets/img/esp8266_pinout.4c1f434c.jpg"},1298:function(e,t,r){e.exports=r.p+"assets/img/esp8266_flashing_ftdi.bc982baa.jpg"},1825:function(e,t,r){"use strict";r.r(t);var o=r(18),a=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"esp8266-wifi-module"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-wifi-module"}},[e._v("#")]),e._v(" ESP8266 WiFi Module")]),e._v(" "),o("p",[e._v("The ESP8266 and its clones are low-cost and readily available Wi-Fi modules with full TCP/IP stack and microcontroller capability.\nThey can be used with any Pixhawk series controller.")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("ESP8266 is the "),o("em",[e._v("defacto")]),e._v(" default WiFi module for use with "),o("RouterLink",{attrs:{to:"/en/flight_controller/pixracer.html"}},[e._v("Pixracer")]),e._v(" (and is usually bundled with it).")],1)]),e._v(" "),o("h2",{attrs:{id:"where-to-buy"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#where-to-buy"}},[e._v("#")]),e._v(" Where to Buy")]),e._v(" "),o("p",[e._v("The module is readily available, and usually have the firmware already installed and configured to useable defaults.\nA few vendors are listed below.")]),e._v(" "),o("p",[e._v("Modules that accept 3.3V supply:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://www.sparkfun.com/products/13678",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sparkfun"),o("OutboundLink")],1)]),e._v(" "),o("li",[e._v("(discontinued) "),o("a",{attrs:{href:"https://us.gearbest.com/boards-shields/pp_009604906563.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GearBeast"),o("OutboundLink")],1)])]),e._v(" "),o("p",[e._v("Modules that accept 5.0V supply:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://www.banggood.com/Wireless-Wifi-to-Uart-Telemetry-Module-With-Antenna-for-Mini-APM-Flight-Controller-p-1065339.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Banggood"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://www.banggood.com/MAVLink-Wifi-Bridge-2_4G-Wireless-Wifi-Telemetry-Module-with-Antenna-for-Pixhawk-APM-Flight-Controller-p-1428590.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Banggood"),o("OutboundLink")],1)])]),e._v(" "),o("p",[o("span",{attrs:{id:"px4_config"}})]),e._v(" "),o("h2",{attrs:{id:"pixhawk-px4-setup-configuration"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#pixhawk-px4-setup-configuration"}},[e._v("#")]),e._v(" Pixhawk/PX4 Setup & Configuration")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("You "),o("em",[e._v("may")]),e._v(" first need to update the ESP8266 module with recent/compatible firmware ("),o("a",{attrs:{href:"#esp8266-flashing-firmware-advanced"}},[e._v("see below")]),e._v(").\nThe manufacture instructions should explain if this is needed.")])]),e._v(" "),o("p",[e._v("Connect your ESP8266 to your Pixhawk-series flight controller (e.g. Pixracer) on any free UART.")]),e._v(" "),o("p",[e._v("Connect the flight controller to your ground station via USB (as WiFi is not yet fully set up).")]),e._v(" "),o("p",[e._v("Using "),o("em",[e._v("QGroundControl")]),e._v(":")]),e._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/en/config/firmware.html"}},[e._v("Load recent PX4 firwmare")])],1),e._v(" "),o("li",[o("RouterLink",{attrs:{to:"/en/peripherals/serial_configuration.html"}},[e._v("Configure the serial port")]),e._v(" used to connect the ESP8266.\nRemember to set the baud rate to 921600 in order to match the value set for the ESP8266.")],1)]),e._v(" "),o("p",[e._v("Once the firmware (port) is set up you can remove the physical USB connection between the ground station and the vehicle.")]),e._v(" "),o("h2",{attrs:{id:"connect-via-esp8266-to-qgc"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connect-via-esp8266-to-qgc"}},[e._v("#")]),e._v(" Connect via ESP8266 to QGC")]),e._v(" "),o("p",[e._v("The module exposes a WiFi hotspot that your ground station computer can use to connect to the vehicle.")]),e._v(" "),o("div",{staticClass:"custom-block note"},[o("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),o("p",[e._v("The settings for the ESP8266 hotspot should be provided with the board (e.g. typically printed on the reverse side of the board or on the packaging).")]),e._v(" "),o("p",[e._v("A common factory network setting is:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("SSID:")]),e._v(" PixRacer")]),e._v(" "),o("li",[o("strong",[e._v("Password:")]),e._v(" pixracer")]),e._v(" "),o("li",[o("strong",[e._v("WiFi Channel:")]),e._v(" 11")]),e._v(" "),o("li",[o("strong",[e._v("UART speed:")]),e._v(" 921600")])]),e._v(" "),o("p",[e._v("Other modules may use settings like this:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("SSID:")]),e._v(" IFFRC_xxxxxxxx")]),e._v(" "),o("li",[o("strong",[e._v("Password:")]),e._v(" 12345678")]),e._v(" "),o("li",[o("strong",[e._v("IP:")]),e._v(" 192.168.4.1")]),e._v(" "),o("li",[o("strong",[e._v("Port:")]),e._v(" 6789 (TCP)")])])]),e._v(" "),o("p",[e._v("On your wifi-enabled "),o("em",[e._v("QGroundControl")]),e._v(" ground station computer/tablet, find and connect to the open wireless network for your ESP8266.\nOn a Windows computer the connection settings for a network with name "),o("strong",[e._v("Pixracer")]),e._v(" and default password "),o("strong",[e._v("pixracer")]),e._v(" point will look like this:")]),e._v(" "),o("p",[o("img",{attrs:{src:r(1293),alt:"Windows Network Setup: Connection"}}),e._v(" "),o("img",{attrs:{src:r(1294),alt:"Windows Network Setup: Security"}})]),e._v(" "),o("p",[o("em",[e._v("QGroundControl")]),e._v(' will automatically connect to the vehicle when the ground station computer is attached to a WiFi access point named  "Pixracer".')]),e._v(" "),o("p",[e._v("If you're using a module with any other WiFi name you will need to manually set up the QGroundControl WiFi connection, as shown in the following section.")]),e._v(" "),o("h2",{attrs:{id:"configure-qgc-with-non-standard-wifi-connections"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configure-qgc-with-non-standard-wifi-connections"}},[e._v("#")]),e._v(" Configure QGC with non-standard WiFi connections")]),e._v(" "),o("p",[o("em",[e._v("QGroundControl")]),e._v(' will automatically connect to the vehicle when the ground station computer is attached to the "Pixracer" WiFi access point.\nFor any other access point name you will need to manually create a custom comm link:')]),e._v(" "),o("ol",[o("li",[e._v("Go to "),o("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/SettingsView/SettingsView.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Application Settings > Comm Links"),o("OutboundLink")],1)]),e._v(" "),o("li",[e._v("Add new connection with appropriate settings.")]),e._v(" "),o("li",[e._v("Select the new connection, and click "),o("strong",[e._v("Connect")]),e._v(".")]),e._v(" "),o("li",[e._v("The vehicle should now connect")])]),e._v(" "),o("h2",{attrs:{id:"verify"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#verify"}},[e._v("#")]),e._v(" Verify")]),e._v(" "),o("p",[e._v("You should now see HUD movement on your QGC computer via wireless link and be able to view the summary panel for the ESP8266 WiFi Bridge (as shown below).")]),e._v(" "),o("p",[o("img",{attrs:{src:r(1295),alt:"QGC Summary showing Wifi Bridge"}})]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("If you have any problem connecting, see "),o("a",{attrs:{href:"https://docs.qgroundcontrol.com/en/Support/troubleshooting_qgc.html#waiting_for_connection",target:"_blank",rel:"noopener noreferrer"}},[e._v("QGC Installation/Configuration Problems"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("h2",{attrs:{id:"esp8266-flashing-firmware-advanced"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-flashing-firmware-advanced"}},[e._v("#")]),e._v(" ESP8266 Flashing/Firmware (Advanced)")]),e._v(" "),o("p",[e._v("ESP8266 modules from different manufacturers may not have appropriate firmware pre-installed.\nThe instructions below explain how to update it with the latest version.")]),e._v(" "),o("h3",{attrs:{id:"pre-built-binaries"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#pre-built-binaries"}},[e._v("#")]),e._v(" Pre Built Binaries")]),e._v(" "),o("p",[o("a",{attrs:{href:"http://www.grubba.com/mavesp8266/firmware-1.2.2.bin",target:"_blank",rel:"noopener noreferrer"}},[e._v("MavLink ESP8266 Firmware V 1.2.2"),o("OutboundLink")],1)]),e._v(" "),o("h3",{attrs:{id:"build-from-sources"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#build-from-sources"}},[e._v("#")]),e._v(" Build From Sources")]),e._v(" "),o("p",[e._v("The "),o("a",{attrs:{href:"https://github.com/dogmaphobic/mavesp8266",target:"_blank",rel:"noopener noreferrer"}},[e._v("firmware repository"),o("OutboundLink")],1),e._v(" contains instructions and all the tools needed for building and flashing the firmware.")]),e._v(" "),o("h3",{attrs:{id:"updating-the-firmware-ota"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-firmware-ota"}},[e._v("#")]),e._v(" Updating the Firmware OTA")]),e._v(" "),o("p",[e._v("If you have firmware 1.0.4 or greater installed, you can do the update using the ESP's "),o("em",[e._v("Over The Air Update")]),e._v(" feature.\nJust connect to its AP WiFi link and browse to: "),o("code",[e._v("http://192.168.4.1/update")]),e._v(".\nYou can then select the firmware file you downloaded above and upload it to the WiFi Module.")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("This is the easiest way to update firmware!")])]),e._v(" "),o("h3",{attrs:{id:"flashing-the-esp8266-firmware"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#flashing-the-esp8266-firmware"}},[e._v("#")]),e._v(" Flashing the ESP8266 Firmware")]),e._v(" "),o("p",[e._v("Before flashing, make sure you boot the ESP8266 in "),o("em",[e._v("Flash Mode")]),e._v(" as described below.\nIf you cloned the "),o("a",{attrs:{href:"https://github.com/dogmaphobic/mavesp8266",target:"_blank",rel:"noopener noreferrer"}},[e._v("MavESP8266"),o("OutboundLink")],1),e._v(" repository, you can build and flash the firmware using the provided "),o("a",{attrs:{href:"http://platformio.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("PlatformIO"),o("OutboundLink")],1),e._v(" tools and environment.\nIf you downloaded the pre-built firmware above, download the "),o("a",{attrs:{href:"https://github.com/espressif/esptool",target:"_blank",rel:"noopener noreferrer"}},[e._v("esptool"),o("OutboundLink")],1),e._v(" utility and use the command line below:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("esptool.py --baud 921600 --port /dev/your_serial_port write_flash 0x00000 firmware_xxxxx.bin\n")])])]),o("p",[e._v("Where:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("firmware_xxxxx.bin")]),e._v(" is the firmware you downloaded above")]),e._v(" "),o("li",[o("strong",[e._v("your_serial_port")]),e._v(" is the name of the serial port where the ESP8266 is connected to ("),o("code",[e._v("/dev/cu.usbmodem")]),e._v(" for example)")])]),e._v(" "),o("h3",{attrs:{id:"wiring-for-flashing-the-firmware"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#wiring-for-flashing-the-firmware"}},[e._v("#")]),e._v(" Wiring for Flashing the Firmware")]),e._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),o("p",[e._v("Most ESP8266 modules support 3.3 volts (only), while some flight controllers (e.g. Pixhawk 4) output at 5V.\nCheck compatibility and step down the voltage if needed.")])]),e._v(" "),o("p",[e._v("There are various methods for setting the ESP8266 into "),o("em",[e._v("Flash Mode")]),e._v(" but not all USB/UART adapters provide all the necessary pins for automatic mode switching.\nIn order to boot the ESP8266 in "),o("em",[e._v("Flash Mode")]),e._v(", the GPIO-0 pin must be set low (GND) and the CH_PD pin must be set high (VCC).\nThis is what my own setup looks like:")]),e._v(" "),o("p",[o("img",{attrs:{src:r(1296),alt:"esp8266 flashing rig"}})]),e._v(" "),o("p",[e._v("I built a cable where RX, TX, VCC, and GND are properly wired directly from the FTDI adapter to the ESP8266.\nFrom the ESP8266, I left two wires connected to GPIO-0 and CH_PD free so I can boot it either normally or in flash mode by connecting them to GND and VCC respectively.")]),e._v(" "),o("h4",{attrs:{id:"esp8266-esp-01-pinout"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-esp-01-pinout"}},[e._v("#")]),e._v(" ESP8266 (ESP-01) Pinout")]),e._v(" "),o("p",[o("img",{attrs:{src:r(1297),alt:"esp8266 wifi module pinout"}})]),e._v(" "),o("h4",{attrs:{id:"flashing-diagram-using-an-ftdi-usb-uart-adapter"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#flashing-diagram-using-an-ftdi-usb-uart-adapter"}},[e._v("#")]),e._v(" Flashing Diagram using an FTDI USB/UART Adapter")]),e._v(" "),o("p",[o("img",{attrs:{src:r(1298),alt:"esp8266 flashing"}})])])}),[],!1,null,null,null);t.default=a.exports}}]);