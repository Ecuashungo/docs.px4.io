(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{1310:function(e,t,o){e.exports=o.p+"assets/img/pixracer_network_setup_connection_windows.4b6c2413.png"},1311:function(e,t,o){e.exports=o.p+"assets/img/pixracer_network_setup_security_windows.646da5eb.png"},1312:function(e,t,o){e.exports=o.p+"assets/img/wifi_bridge.5e243a79.png"},1313:function(e,t,o){e.exports=o.p+"assets/img/esp8266_flashing_rig.900b6050.jpg"},1314:function(e,t,o){e.exports=o.p+"assets/img/esp8266_pinout.4c1f434c.jpg"},1315:function(e,t,o){e.exports=o.p+"assets/img/esp8266_flashing_ftdi.bc982baa.jpg"},2260:function(e,t,o){"use strict";o.r(t);var r=o(18),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"esp8266-wifi-module"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-wifi-module"}},[e._v("#")]),e._v(" ESP8266 WiFi Module")]),e._v(" "),r("p",[e._v("The ESP8266 and its clones are low-cost and readily available Wi-Fi modules with full TCP/IP stack and microcontroller capability. They can be used with any Pixhawk series controller.")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("ESP8266 is the *defacto* default WiFi module for use with [Pixracer](../flight_controller/pixracer.md) (and is usually bundled with it).")])]),e._v(" "),r("h2",{attrs:{id:"where-to-buy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#where-to-buy"}},[e._v("#")]),e._v(" Where to Buy")]),e._v(" "),r("p",[e._v("The module is readily available, and usually have the firmware already installed and configured to useable defaults. A few vendors are listed below.")]),e._v(" "),r("p",[e._v("Modules that accept 3.3V supply:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.sparkfun.com/products/13678",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sparkfun"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("(discontinued) "),r("a",{attrs:{href:"https://us.gearbest.com/boards-shields/pp_009604906563.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GearBeast"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("Modules that accept 5.0V supply:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.banggood.com/Wireless-Wifi-to-Uart-Telemetry-Module-With-Antenna-for-Mini-APM-Flight-Controller-p-1065339.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Banggood"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.banggood.com/MAVLink-Wifi-Bridge-2_4G-Wireless-Wifi-Telemetry-Module-with-Antenna-for-Pixhawk-APM-Flight-Controller-p-1428590.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Banggood"),r("OutboundLink")],1)])]),e._v(" "),r("p",[r("span",{attrs:{id:"px4_config"}})]),e._v(" "),r("h2",{attrs:{id:"pixhawk-px4-setup-configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pixhawk-px4-setup-configuration"}},[e._v("#")]),e._v(" Pixhawk/PX4 Setup & Configuration")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("You "),r("em",[e._v("may")]),e._v(" first need to update the ESP8266 module with recent/compatible firmware ("),r("a",{attrs:{href:"#esp8266-flashing-firmware-advanced"}},[e._v("see below")]),e._v("). The manufacture instructions should explain if this is needed.")])]),e._v(" "),r("p",[e._v("Connect your ESP8266 to your Pixhawk-series flight controller (e.g. Pixracer) on any free UART.")]),e._v(" "),r("p",[e._v("Connect the flight controller to your ground station via USB (as WiFi is not yet fully set up).")]),e._v(" "),r("p",[e._v("Using "),r("em",[e._v("QGroundControl")]),e._v(":")]),e._v(" "),r("ul",[r("li",[r("RouterLink",{attrs:{to:"/ko/config/firmware.html"}},[e._v("Load recent PX4 firwmare")])],1),e._v(" "),r("li",[r("RouterLink",{attrs:{to:"/ko/peripherals/serial_configuration.html"}},[e._v("Configure the serial port")]),e._v(" used to connect the ESP8266. Remember to set the baud rate to 921600 in order to match the value set for the ESP8266.")],1)]),e._v(" "),r("p",[e._v("Once the firmware (port) is set up you can remove the physical USB connection between the ground station and the vehicle.")]),e._v(" "),r("h2",{attrs:{id:"connect-via-esp8266-to-qgc"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#connect-via-esp8266-to-qgc"}},[e._v("#")]),e._v(" Connect via ESP8266 to QGC")]),e._v(" "),r("p",[e._v("The module exposes a WiFi hotspot that your ground station computer can use to connect to the vehicle.")]),e._v(" "),r("div",{staticClass:"custom-block note"},[r("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),r("p",[e._v("The settings for the ESP8266 hotspot should be provided with the board (e.g. typically printed on the reverse side of the board or on the packaging).")]),e._v(" "),r("p",[e._v("A common factory network setting is:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("SSID:")]),e._v(" PixRacer")]),e._v(" "),r("li",[r("strong",[e._v("Password:")]),e._v(" pixracer")]),e._v(" "),r("li",[r("strong",[e._v("WiFi Channel:")]),e._v(" 11")]),e._v(" "),r("li",[r("strong",[e._v("UART speed:")]),e._v(" 921600")])]),e._v(" "),r("p",[e._v("Other modules may use settings like this:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("SSID:")]),e._v(" IFFRC_xxxxxxxx")]),e._v(" "),r("li",[r("strong",[e._v("Password:")]),e._v(" 12345678")]),e._v(" "),r("li",[r("strong",[e._v("IP:")]),e._v(" 192.168.4.1")]),e._v(" "),r("li",[r("strong",[e._v("Port:")]),e._v(" 6789 (TCP)")])])]),e._v(" "),r("p",[e._v("On your wifi-enabled "),r("em",[e._v("QGroundControl")]),e._v(" ground station computer/tablet, find and connect to the open wireless network for your ESP8266. On a Windows computer the connection settings for a network with name "),r("strong",[e._v("Pixracer")]),e._v(" and default password "),r("strong",[e._v("pixracer")]),e._v(" point will look like this:")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1310),alt:"Windows Network Setup: Connection"}}),e._v(" "),r("img",{attrs:{src:o(1311),alt:"Windows Network Setup: Security"}})]),e._v(" "),r("p",[r("em",[e._v("QGroundControl")]),e._v(' will automatically connect to the vehicle when the ground station computer is attached to a WiFi access point named "Pixracer".')]),e._v(" "),r("p",[e._v("If you're using a module with any other WiFi name you will need to manually set up the QGroundControl WiFi connection, as shown in the following section.")]),e._v(" "),r("h2",{attrs:{id:"configure-qgc-with-non-standard-wifi-connections"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configure-qgc-with-non-standard-wifi-connections"}},[e._v("#")]),e._v(" Configure QGC with non-standard WiFi connections")]),e._v(" "),r("p",[r("em",[e._v("QGroundControl")]),e._v(' will automatically connect to the vehicle when the ground station computer is attached to the "Pixracer" WiFi access point. For any other access point name you will need to manually create a custom comm link:')]),e._v(" "),r("ol",[r("li",[e._v("Go to "),r("a",{attrs:{href:"https://docs.qgroundcontrol.com/master/en/SettingsView/SettingsView.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Application Settings > Comm Links"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Add new connection with appropriate settings.")]),e._v(" "),r("li",[e._v("Select the new connection, and click "),r("strong",[e._v("Connect")]),e._v(".")]),e._v(" "),r("li",[e._v("The vehicle should now connect")])]),e._v(" "),r("h2",{attrs:{id:"verify"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#verify"}},[e._v("#")]),e._v(" Verify")]),e._v(" "),r("p",[e._v("You should now see HUD movement on your QGC computer via wireless link and be able to view the summary panel for the ESP8266 WiFi Bridge (as shown below).")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1312),alt:"QGC Summary showing Wifi Bridge"}})]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("If you have any problem connecting, see "),r("a",{attrs:{href:"https://docs.qgroundcontrol.com/en/Support/troubleshooting_qgc.html#waiting_for_connection",target:"_blank",rel:"noopener noreferrer"}},[e._v("QGC Installation/Configuration Problems"),r("OutboundLink")],1),e._v(".")])]),e._v(" "),r("h2",{attrs:{id:"esp8266-flashing-firmware-advanced"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-flashing-firmware-advanced"}},[e._v("#")]),e._v(" ESP8266 Flashing/Firmware (Advanced)")]),e._v(" "),r("p",[e._v("ESP8266 modules from different manufacturers may not have appropriate firmware pre-installed. The instructions below explain how to update it with the latest version.")]),e._v(" "),r("h3",{attrs:{id:"pre-built-binaries"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pre-built-binaries"}},[e._v("#")]),e._v(" Pre Built Binaries")]),e._v(" "),r("p",[r("a",{attrs:{href:"http://www.grubba.com/mavesp8266/firmware-1.2.2.bin",target:"_blank",rel:"noopener noreferrer"}},[e._v("MavLink ESP8266 Firmware V 1.2.2"),r("OutboundLink")],1)]),e._v(" "),r("h3",{attrs:{id:"build-from-sources"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build-from-sources"}},[e._v("#")]),e._v(" Build From Sources")]),e._v(" "),r("p",[e._v("The "),r("a",{attrs:{href:"https://github.com/dogmaphobic/mavesp8266",target:"_blank",rel:"noopener noreferrer"}},[e._v("firmware repository"),r("OutboundLink")],1),e._v(" contains instructions and all the tools needed for building and flashing the firmware.")]),e._v(" "),r("h3",{attrs:{id:"updating-the-firmware-ota"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-firmware-ota"}},[e._v("#")]),e._v(" Updating the Firmware OTA")]),e._v(" "),r("p",[e._v("If you have firmware 1.0.4 or greater installed, you can do the update using the ESP's "),r("em",[e._v("Over The Air Update")]),e._v(" feature. Just connect to its AP WiFi link and browse to: "),r("code",[e._v("http://192.168.4.1/update")]),e._v(". You can then select the firmware file you downloaded above and upload it to the WiFi Module.")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("This is the easiest way to update firmware!")])]),e._v(" "),r("h3",{attrs:{id:"flashing-the-esp8266-firmware"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#flashing-the-esp8266-firmware"}},[e._v("#")]),e._v(" Flashing the ESP8266 Firmware")]),e._v(" "),r("p",[e._v("Before flashing, make sure you boot the ESP8266 in "),r("em",[e._v("Flash Mode")]),e._v(" as described below. If you cloned the "),r("a",{attrs:{href:"https://github.com/dogmaphobic/mavesp8266",target:"_blank",rel:"noopener noreferrer"}},[e._v("MavESP8266"),r("OutboundLink")],1),e._v(" repository, you can build and flash the firmware using the provided "),r("a",{attrs:{href:"http://platformio.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("PlatformIO"),r("OutboundLink")],1),e._v(" tools and environment. If you downloaded the pre-built firmware above, download the "),r("a",{attrs:{href:"https://github.com/espressif/esptool",target:"_blank",rel:"noopener noreferrer"}},[e._v("esptool"),r("OutboundLink")],1),e._v(" utility and use the command line below:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("esptool.py --baud 921600 --port /dev/your_serial_port write_flash 0x00000 firmware_xxxxx.bin\n")])])]),r("p",[e._v("Where:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("firmware_xxxxx.bin")]),e._v(" is the firmware you downloaded above")]),e._v(" "),r("li",[r("strong",[e._v("your_serial_port")]),e._v(" is the name of the serial port where the ESP8266 is connected to ("),r("code",[e._v("/dev/cu.usbmodem")]),e._v(" for example)")])]),e._v(" "),r("h3",{attrs:{id:"wiring-for-flashing-the-firmware"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#wiring-for-flashing-the-firmware"}},[e._v("#")]),e._v(" Wiring for Flashing the Firmware")]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("Most ESP8266 modules support 3.3 volts (only), while some flight controllers (e.g. Pixhawk 4) output at 5V. Check compatibility and step down the voltage if needed.")])]),e._v(" "),r("p",[e._v("There are various methods for setting the ESP8266 into "),r("em",[e._v("Flash Mode")]),e._v(" but not all USB/UART adapters provide all the necessary pins for automatic mode switching. In order to boot the ESP8266 in "),r("em",[e._v("Flash Mode")]),e._v(", the GPIO-0 pin must be set low (GND) and the CH_PD pin must be set high (VCC). This is what my own setup looks like:")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1313),alt:"esp8266 flashing rig"}})]),e._v(" "),r("p",[e._v("I built a cable where RX, TX, VCC, and GND are properly wired directly from the FTDI adapter to the ESP8266. From the ESP8266, I left two wires connected to GPIO-0 and CH_PD free so I can boot it either normally or in flash mode by connecting them to GND and VCC respectively.")]),e._v(" "),r("h4",{attrs:{id:"esp8266-esp-01-pinout"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#esp8266-esp-01-pinout"}},[e._v("#")]),e._v(" ESP8266 (ESP-01) Pinout")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1314),alt:"esp8266 wifi module pinout"}})]),e._v(" "),r("h4",{attrs:{id:"flashing-diagram-using-an-ftdi-usb-uart-adapter"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#flashing-diagram-using-an-ftdi-usb-uart-adapter"}},[e._v("#")]),e._v(" Flashing Diagram using an FTDI USB/UART Adapter")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1315),alt:"esp8266 flashing"}})])])}),[],!1,null,null,null);t.default=a.exports}}]);