(window.webpackJsonp=window.webpackJsonp||[]).push([[640],{2321:function(e,t,_){"use strict";_.r(t);var o=_(18),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"多旋翼的转换速率型轨迹"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#多旋翼的转换速率型轨迹"}},[e._v("#")]),e._v(" 多旋翼的转换速率型轨迹")]),e._v(" "),o("p",[e._v("转换速率轨迹类型是一种简单的实现方式，在这种情况下，加加速度和加速度使用转换速率进行限制（加加速度和加速度限制不是硬约束）。")]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/zh/config_mc/mc_jerk_limited_type_trajectory.html"}},[e._v("MC Jerk-limited Trajectory Tuning")]),e._v(" is an alternative trajectory that provides for smoother responses.\n:::")],1),e._v(" "),o("p",[e._v("本话题解释了如何调整轨迹类型。")]),e._v(" "),o("p",[e._v("在"),o("RouterLink",{attrs:{to:"/zh/flight_modes/position_mc.html"}},[e._v("定点模式")]),e._v("中， 摇杆输入映射为"),o("strong",[e._v("位置-控制")]),e._v("或"),o("strong",[e._v("速度-控制")]),e._v("。")],1),e._v(" "),o("p",[e._v("当摇杆输入在死区 "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_HOLD_DZ"}},[e._v("MPC_HOLD_DZ")]),e._v("内时，位置控制被启用，否则启用速度控制。")],1),e._v(" "),o("h2",{attrs:{id:"定点模式"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#定点模式"}},[e._v("#")]),e._v(" 定点模式")]),e._v(" "),o("p",[e._v("以下所有参数都是可调节参数，不能被直接映射为物理量。")]),e._v(" "),o("p",[e._v("该参数用于水平方向的位置控制，即机体理应停留在当前位置。 速度设定值变化率的极限由 "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_ACC_HOR_MAX"}},[e._v("MPC_ACC_HOR_MAX")]),e._v(" 定义。")],1),e._v(" "),o("p",[e._v("For the remainder of this topic the term "),o("strong",[e._v("position-control")]),e._v(" represents the case where both loops are active while "),o("strong",[e._v("velocity-control")]),e._v(" refers to the case when only the velocity control loop is in use.\n:::")]),e._v(" "),o("p",[e._v("Position-control is active when the stick inputs are within the deadzone "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_HOLD_DZ"}},[e._v("MPC_HOLD_DZ")]),e._v(", and velocity-control otherwise.")],1),e._v(" "),o("p",[e._v("All the parameters below are tuning parameters and cannot be mapped directly to the physical quantity.")]),e._v(" "),o("h4",{attrs:{id:"mpc-acc-hor-max"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mpc-acc-hor-max"}},[e._v("#")]),e._v(" MPC_ACC_HOR_MAX")]),e._v(" "),o("p",[e._v("This parameter is used for position-control in the horizontal direction, where the vehicle is supposed to stay at the current location. The limit for the rate of change of the velocity setpoint is defined by "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_ACC_HOR_MAX"}},[e._v("MPC_ACC_HOR_MAX")]),e._v(". This parameter should be set larger than any of the other acceleration related parameters in the horizontal direction.")],1),e._v(" "),o("p",[o("span",{attrs:{id:"mpc_acc_hor-and-mpc_dec_hor_slow"}})]),e._v(" "),o("h4",{attrs:{id:"mpc-acc-hor-和-mpc-dec-hor-slow"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mpc-acc-hor-和-mpc-dec-hor-slow"}},[e._v("#")]),e._v(" MPC_ACC_HOR 和 MPC_DEC_HOR_SLOW")]),e._v(" "),o("p",[e._v("摇杆满输入时，速度设定值不会直接从"),o("code",[e._v("0 m/s")]),e._v("变到"),o("code",[e._v("4 m/s")]),e._v("(即阶跃输入)，而是根据参数"),o("code",[e._v("MPC_ACC_HOR")]),e._v("的斜率渐变。 然而，飞行器的实际速度不会完美地跟上设定值，而是会稍微滞后。 "),o("code",[e._v("MPC_ACC_HOR")]),e._v("的值越大，这个滞后就会越明显。 In addition, "),o("code",[e._v("MPC_DEC_HOR_SLOW")]),e._v(" also limits the change in velocity setpoint when the user demands a deceleration in the current flight direction. For instance, if the stick input changes from maximum (="),o("code",[e._v("1")]),e._v(") to "),o("code",[e._v("0.5")]),e._v(", the velocity setpoint change will be limited by "),o("code",[e._v("MPC_DEC_HOR_SLOW")]),e._v(".")]),e._v(" "),o("p",[e._v("During transition from "),o("strong",[e._v("velocity-control")]),e._v(" to "),o("strong",[e._v("position-control")]),e._v(", there is a hard switch from from "),o("code",[e._v("MPC_ACC_HOR")]),e._v(" to "),o("code",[e._v("MPC_ACC_HOR_MAX")]),e._v(" and a reset of the velocity setpoint to the current vehicle velocity. The reset and the hard switch can both introduce a jerky flight performance during stopping. Nonetheless, the reset is required because the smoothing parameters introduce a delay to the setpoint, which can lead to unexpected flight maneuvers.")]),e._v(" "),o("p",[e._v("A simple example explaining why the reset is needed is given below.")]),e._v(" "),o("p",[e._v("Consider the case where a user demands full speed from hover followed by a stop request. This is equivalent to full stick input with maximum value of "),o("code",[e._v("1")]),e._v(" followed by zero stick input. To simplify the example, assume that "),o("code",[e._v("MPC_ACC_HOR_MAX")]),e._v(" is equal to "),o("code",[e._v("MPC_ACC_HOR")]),e._v(" and therefore there is no hard switch in acceleration limit when switching from "),o("strong",[e._v("velocity-control")]),e._v(" to "),o("strong",[e._v("position-control")]),e._v(". In addition, let's assume the maximum speed that can be demanded is "),o("code",[e._v("4 m/s")]),e._v(".")]),e._v(" "),o("p",[e._v("加加速度参数通过设置最大加速度 "),o("code",[e._v("MPC_ACC_HOR_MAX")]),e._v(" 来控制速度上限。 实际的加加速度值和飞行器制动前的速度值呈线性关系， 全速映射到"),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_JERK_MAX"}},[e._v("MPC_JERK_MAX")]),e._v(" 而零速映射到 "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_JERK_MIN"}},[e._v("MPC_JERK_MIN")]),e._v("。 The lag will be more significant the larger the value of "),o("code",[e._v("MPC_ACC_HOR")]),e._v(".")],1),e._v(" "),o("p",[o("img",{attrs:{src:_(626),alt:"Slewrate Reset"}})]),e._v(" "),o("p",[e._v("Without the reset (the top graph), at the moment of the stop demand (stick equal 0) the velocity setpoint will ramp down with the maximum rate given by "),o("code",[e._v("MPC_ACC_HOR_MAX")]),e._v(". Due to the lag the vehicle will first continue to accelerate in the direction previous to the stop demand followed by slowly decelerating towards zero. With the reset of the velocity setpoint to the current velocity, the delay due to the lag during stop demand can be overcome.")]),e._v(" "),o("h4",{attrs:{id:"mpc-acc-up-max-和-mpc-acc-down-max"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mpc-acc-up-max-和-mpc-acc-down-max"}},[e._v("#")]),e._v(" MPC_ACC_UP_MAX 和 MPC_ACC_DOWN_MAX")]),e._v(" "),o("p",[o("code",[e._v("MPC_ACC_UP_MAX")]),e._v(" >= "),o("code",[e._v("MPC_ACC_DOWN_MAX")]),e._v(", otherwise the firmware will overwrite the given values.")]),e._v(" "),o("ul",[o("li",[e._v("**位置-控制：**速度设定值在 z 方向的变化上限由参数 "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_ACC_UP_MAX"}},[e._v("MPC_ACC_UP_MAX")]),e._v(" 给出。")],1),e._v(" "),o("li",[e._v("**速度-控制：**摇杆输入导致的速度设定值的变化极限由两个参数给出， "),o("code",[e._v("MPC_ACC_UP_MAX")]),e._v(" 为上限， "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_ACC_DOWN_MAX"}},[e._v("MPC_ACC_DOWN_MAX")]),e._v(" 为下限。")],1)]),e._v(" "),o("h4",{attrs:{id:"mpc-jerk-max-和-mpc-jerk-min"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mpc-jerk-max-和-mpc-jerk-min"}},[e._v("#")]),e._v(" MPC_JERK_MAX 和 MPC_JERK_MIN")]),e._v(" "),o("p",[e._v("These two parameters only have effect during the transition from "),o("strong",[e._v("velocity-control")]),e._v(" to "),o("strong",[e._v("position-control")]),e._v(". The purpose of these two parameters are to minimize the jerk introduced from forward flight to hover (please see "),o("a",{attrs:{href:"#mpc_acc_hor-and-mpc_dec_hor_slow"}},[e._v("MPC_ACC_HOR and MPC_DEC_HOR_SLOW")]),e._v(").")]),e._v(" "),o("p",[e._v("The jerk-parameter controls the rate limit with which the acceleration limit can change to "),o("code",[e._v("MPC_ACC_HOR_MAX")]),e._v(". The actual jerk-value is a linear map from velocity speed to jerk where full speed maps to "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_JERK_MAX"}},[e._v("MPC_JERK_MAX")]),e._v(" and zero speed to "),o("RouterLink",{attrs:{to:"/zh/advanced_config/parameter_reference.html#MPC_JERK_MIN"}},[e._v("MPC_JERK_MIN")]),e._v(". The smoothing can be turned off by setting "),o("code",[e._v("MPC_JERK_MAX")]),e._v(" to a value smaller than "),o("code",[e._v("MPC_JERK_MIN")]),e._v(".")],1)])}),[],!1,null,null,null);t.default=r.exports},626:function(e,t,_){e.exports=_.p+"assets/img/slewrate_reset.18833812.svg"}}]);