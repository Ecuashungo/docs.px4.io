(window.webpackJsonp=window.webpackJsonp||[]).push([[1036],{2189:function(a,t,s){"use strict";s.r(t);var e=s(18),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"stm32-부트로더"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stm32-부트로더"}},[a._v("#")]),a._v(" STM32 부트로더")]),a._v(" "),s("p",[a._v("PX4 부트로더 코드는 깃허브 "),s("a",{attrs:{href:"https://github.com/px4/bootloader",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bootloader"),s("OutboundLink")],1),a._v(" 저장소에 있습니다.")]),a._v(" "),s("h2",{attrs:{id:"지원-보드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#지원-보드"}},[a._v("#")]),a._v(" 지원 보드")]),a._v(" "),s("ul",[s("li",[a._v("FMUv2 (픽스호크 1, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv3 (픽스호크 2, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv4 (픽스레이서 3와 픽스호크 3 프로, STM32F4)")]),a._v(" "),s("li",[a._v("FMUv5 (픽스호크 4, STM32F7)")]),a._v(" "),s("li",[a._v("TAPv1 (TBA, STM32F4)")]),a._v(" "),s("li",[a._v("ASCv1 (TBA, STM32F4)")])]),a._v(" "),s("h2",{attrs:{id:"부트로더-빌드"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#부트로더-빌드"}},[a._v("#")]),a._v(" 부트로더 빌드")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/PX4/Bootloader.git\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Bootloader\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" submodule init\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" submodule update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n")])])]),s("p",[a._v("위 과정을 거치면 Bootloader 디렉터리에서 지원하는 모든 보드의 elf파일을 만듭니다.")]),a._v(" "),s("h2",{attrs:{id:"부트로더-플래싱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#부트로더-플래싱"}},[a._v("#")]),a._v(" 부트로더 플래싱")]),a._v(" "),s("blockquote",[s("p",[s("strong",[a._v("Important")]),a._v(" JTAG / SWD 에 접근하려면 일부 보드에서는 올바른 전원 인가 과정이 중요합니다. 아래 설명대로 정확하게 단계를 따르십시오.")])]),a._v(" "),s("p",[a._v("다음 절차는 블랙매직 / 드론코드 프로브에 해당합니다. 기타 JTAG 프루브는 다르지만 비슷한 과정을 밟습니다. 부트로더를 플래싱하는 개발자는 필요한 지식을 숙지해야 합니다. 어떻게 하는지 모르겠다면 부트로더에서 정말로 뭘 바꿔야 하는지 다시한번 고민해보셔야 합니다.")]),a._v(" "),s("p",[a._v("절차는 다음과 같습니다.")]),a._v(" "),s("ol",[s("li",[a._v("JTAG 케이블 연결 제거")]),a._v(" "),s("li",[a._v("USB 전원 케이블 연결")]),a._v(" "),s("li",[a._v("JTAG 케이블 연결")])]),a._v(" "),s("h3",{attrs:{id:"블랙-매직-드론코드-프로브"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#블랙-매직-드론코드-프로브"}},[a._v("#")]),a._v(" 블랙 매직 / 드론코드 프로브")]),a._v(" "),s("h4",{attrs:{id:"올바른-시리얼-포트-사용"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#올바른-시리얼-포트-사용"}},[a._v("#")]),a._v(" 올바른 시리얼 포트 사용")]),a._v(" "),s("ul",[s("li",[a._v("LINUX: "),s("code",[a._v("/dev/serial/by-id/usb-Black_Sphere_XXX-if00")])]),a._v(" "),s("li",[a._v("MAC OS: tty.xxx 포트가 아닌 cu.xxx 포트를 사용하는지 확인하십시오: "),s("code",[a._v("tar ext /dev/tty.usbmodemDDEasdf")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("arm-none-eabi-gdb\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" ext /dev/serial/by-id/usb-Black_Sphere_XXX-if00\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" mon swdp_scan\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" attach "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" mon option erase\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" mon erase_mass\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" load tapv1_bl.elf\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n        Transfer rate: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(" KB/sec, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("828")]),a._v(" bytes/write.\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v("\n")])])]),s("h3",{attrs:{id:"j-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#j-link"}},[a._v("#")]),a._v(" J-Link")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.segger.com/jlink-gdb-server.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("J-Link GDB 서버"),s("OutboundLink")],1),a._v(" 관련 절차입니다.")]),a._v(" "),s("h4",{attrs:{id:"준비-요건"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#준비-요건"}},[a._v("#")]),a._v(" 준비 요건")]),a._v(" "),s("p",[a._v("Segger 웹사이트의 "),s("a",{attrs:{href:"https://www.segger.com/downloads/jlink",target:"_blank",rel:"noopener noreferrer"}},[a._v("Download the J-Link software"),s("OutboundLink")],1),a._v("의 안내사항을 따라 다운로드 및 설치를 수행하십시오.")]),a._v(" "),s("h4",{attrs:{id:"jlink-gdb-서버-실행"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jlink-gdb-서버-실행"}},[a._v("#")]),a._v(" JLink GDB 서버 실행")]),a._v(" "),s("p",[a._v("다음 명령어는 STM32F427VI SoC 기반의 비행 제어 장치용 서버를 실행합니다:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("JLinkGDBServer -select "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USB")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" -device STM32F427VI -if SWD-DP -speed "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20000")]),a._v("\n")])])]),s("p",[a._v("일반 대ㅇ의 "),s("code",[a._v("--device")]),a._v("/SoC 옵션은 다음과 같습니다:")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("FMUv2, FMUv3, FMUv4, aerofc-v1, mindpx-v2:")]),a._v(" STM32F427VI")]),a._v(" "),s("li",[s("strong",[a._v("px4_fmu-v4pro:")]),a._v(" STM32F469II")]),a._v(" "),s("li",[s("strong",[a._v("px4_fmu-v5:")]),a._v(" STM32F765II")]),a._v(" "),s("li",[s("strong",[a._v("crazyflie:")]),a._v(" STM32F405RG")])]),a._v(" "),s("h4",{attrs:{id:"gdb-연결"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gdb-연결"}},[a._v("#")]),a._v(" GDB 연결")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("arm-none-eabi-gdb\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" ext :2331\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" load aerofcv1_bl.elf\n")])])]),s("h3",{attrs:{id:"문제-해결"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#문제-해결"}},[a._v("#")]),a._v(" 문제 해결")]),a._v(" "),s("p",[a._v("위의 명령어가 존재하지 않는 경우, 블랙매직 프로브를 사용하지 않는 경우이거나 프로그램을 업데이트하지  않은 경우입니다. 프로브의 프로그램을 먼저 업그레이드하십시오.")]),a._v(" "),s("p",[a._v("아래의 에러 메시지가 발생하는 경우:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Error erasing flash with vFlashErase packet\n")])])]),s("p",[a._v("타겟의 연결을 끊고(JTAG 연결은 유지한 채로) 다음 명령을 실행하십시오:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mon tpwr disable\nswdp_scan\nattach "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nload tapv1_bl.elf\n")])])]),s("p",[a._v("이 절차는 타겟의 전원을 끊고 플래싱 과정을 다시 시도합니다.")])])}),[],!1,null,null,null);t.default=n.exports}}]);