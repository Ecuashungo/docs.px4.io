(window.webpackJsonp=window.webpackJsonp||[]).push([[612],{2188:function(s,t,a){"use strict";a.r(t);var n=a(18),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"가제보-모의-시험-환경의-ros"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#가제보-모의-시험-환경의-ros"}},[s._v("#")]),s._v(" 가제보 모의 시험 환경의 ROS")]),s._v(" "),n("p",[n("RouterLink",{attrs:{to:"/ko/ros/"}},[s._v("ROS")]),s._v(" (로봇 운영체제)는 PX4와 "),n("RouterLink",{attrs:{to:"/ko/simulation/gazebo.html"}},[s._v("가제보 모의 시험 환경")]),s._v("을 함께 쓸 수 있습니다. ROS는 PX4와 통신하는 "),n("RouterLink",{attrs:{to:"/ko/ros/mavros_installation.html"}},[s._v("MAVROS")]),s._v(" MAVLink 노드를 활용합니다.")],1),s._v(" "),n("p",[s._v("ROS/가제보의 PX4와의 통합시 다음 다이어그램 패턴을 따릅니다("),n("em",[s._v("일반")]),s._v(" "),n("RouterLink",{attrs:{to:"/ko/simulation/#sitl-simulation-environment"}},[s._v("PX4 모의 시험 환경")]),s._v("을 보여줍니다). PX4는 모의 시험 환경(예: 가제보)과 통신하여 모의 환경으로부터 오는 센서 데이터를 받고 모터와 액츄에이터 값을 내보냅니다. 지상 통제 장치와 모의 환경과 수신 명령으로부터 텔레메트리 전송을 시행하는 보드 외부 장치 API(예: ROS)와 통신을 수행합니다.")],1),s._v(" "),n("p",[n("img",{attrs:{src:a(373),alt:"PX4 SITL 개요"}})]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("Note")]),s._v(' "보통 동작"과 유일하게 '),n("em",[s._v("약간")]),s._v(" 다른점이라면, ROS는 14557 포트로 연결을 수립합니다. 반면에 더 일반적인 보드 외부 장치 API에서는 UDP 포트 14540에서 연결을 기다립니다.")])]),s._v(" "),n("h2",{attrs:{id:"ros와-가제보-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros와-가제보-설치"}},[s._v("#")]),s._v(" ROS와 가제보 설치")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("Note")]),s._v(" "),n("em",[s._v("ROS")]),s._v(" 는 리눅스만 지원합니다 (macOS 또는 윈도우는 아님).")])]),s._v(" "),n("p",[s._v("우분투 리눅스에서 ROS로 PX4 모의 시험 환경을 구성하는 가장 쉬운 방법은 "),n("RouterLink",{attrs:{to:"/ko/dev_setup/dev_env_linux_ubuntu.html#rosgazebo"}},[s._v("리눅스 개발 환경 > ROS와 가제보")]),s._v('에서 찾을 수 있는 표준 설치 스크립트의 활용입니다. 스크립트는 필요한 모든 구성 항목, PX4, ROS "키네틱", 가제보 7 모의 시험 환경, '),n("RouterLink",{attrs:{to:"/ko/ros/mavros_installation.html"}},[s._v("MAVROS")]),s._v("를 설치합니다.")],1),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("Note")]),s._v(' 스크립트는 가제보 7에 해당하는 <0>표준 ROS "키네틱" 설치 방법'),s._v("을 따릅니다.")])]),s._v(" "),n("h2",{attrs:{id:"ros-모의-시험-환경-실행"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ros-모의-시험-환경-실행"}},[s._v("#")]),s._v(" ROS/모의 시험 환경 실행")]),s._v(" "),n("p",[s._v("아래 명령은 모의 시험 환경을 실행하고 ROS에 "),n("RouterLink",{attrs:{to:"/ko/ros/mavros_installation.html"}},[s._v("MAVROS")]),s._v("로 연결할 때 활용할 수 있습니다. 여기서 "),n("code",[s._v("fcu_url")]),s._v("은 모의 시험 환경을 실행하는 컴퓨터의 IP 주소 및 포트번호입니다:")],1),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("roslaunch mavros px4.launch fcu_url:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"udp://:14540@192.168.1.36:14557"')]),s._v("\n")])])]),n("p",[s._v("localhost에 연결하려면 아래 URL을 활용하십시오:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("roslaunch mavros px4.launch fcu_url:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"udp://:14540@127.0.0.1:14557"')]),s._v("\n")])])]),n("blockquote",[n("p",[n("strong",[s._v("Tip")]),s._v(" "),n("code",[s._v("-w")]),s._v("(경고) 옵션과 "),n("code",[s._v("-v")]),s._v("(자세한 출력) 옵션을 주어 "),n("em",[s._v("roslaunch")]),s._v(" 을 실행하면 설정 과정 중 빠진 의존성 경고를 확인해볼 수 있습니다. 예를 들어:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code")])])]),s._v(" "),n("p",[s._v('roslaunch mavros px4.launch fcu_url:="udp://:14540@127.0.0.1:14557"')]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n\n## ROS 래퍼로 가제보 실행\n\n가제보 모의 시험 환경은 ROS 토픽에 데이터를 직접 내보내는 센서를 붙일 용도로 수정할 수 있습니다. 예를 들면 가제보 ROS 레이저 플러그인이 있습니다. 이 기능을 지원하려면, 가제보를 적당한 ROS 래퍼와 함께 실행해야합니다.\n\nROS에 래핑한 모의 시험 환경을 실행할 수 있는 ROS 실행 스크립트가 있습니다:\n\n* [posix_sitl.launch](https://github.com/PX4/PX4-Autopilot/blob/master/launch/posix_sitl.launch): 생짜 SITL 실행\n* [mavros_posix_sitl.launch](https://github.com/PX4/PX4-Autopilot/blob/master/launch/mavros_posix_sitl.launch): SITL과 MAVROS\n\nROS에 래핑한 SITL을 실행하려면 ROS 환경을 업데이트한 후 늘상 하던 방식대로 실행하십시오:\n\n(추가): MAVROS또는 다른 ROS 패키지를 소스로부터 컴파일했을 경우 catkin 작업 영역만을 source 명령으로 지정하십시오:\n\n```sh\ncd <PX4-Autopilot_clone>\nDONT_RUN=1 make px4_sitl_default gazebo\nsource ~/catkin_ws/devel/setup.bash    # (optional)\nsource Tools/setup_gazebo.bash $(pwd) $(pwd)/build/px4_sitl_default\nexport ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$(pwd)\nexport ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$(pwd)/Tools/sitl_gazebo\nroslaunch px4 posix_sitl.launch\n")])])]),n("p",[s._v("위에서 언급한 실행 파일 중 하를 여러분의 실행 파일 목록에 넣어 ROS 프로그램을 모의 시험 환경에서 실행할 수 있게 하십시오.")]),s._v(" "),n("h2",{attrs:{id:"움직임-뒤에서-일어나는-일"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#움직임-뒤에서-일어나는-일"}},[s._v("#")]),s._v(" 움직임 뒤에서 일어나는 일")]),s._v(" "),n("p",[s._v("이 절에서는 "),n("em",[s._v("roslaunch")]),s._v("가 앞에서 안내한 과정에 대해 어떻게 실제로 동작하는지를 보여줍니다(모의 시험 환경과 ROS를 직접 실행할 때 이 과정을 따라갈 수 있습니다).")]),s._v(" "),n("p",[s._v("우선 아래 명령으로 모의 시험 환경을 시작하십시오:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("no_sim")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" px4_sitl_default gazebo\n")])])]),n("p",[s._v("콘솔 화면은 다음과 같이 나타납니다:")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("init"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" shell id: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("46979166467136")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("init"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" task name: px4\n\n______  __   __    ___\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ___ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" / /   /   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("_/ /  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" V /   / /"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  __/   /   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("  / /_"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     / /^"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("___  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/     "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("_/\n\nReady to fly.\n\n\nINFO  LED::init\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("729")]),s._v(" DevObj::init led\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("736")]),s._v(" Added driver 0x2aba34001080 /dev/led0\nINFO  LED::init\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("742")]),s._v(" DevObj::init led\nINFO  Not using /dev/ttyACM0 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" radio control input. Assuming joystick input via MAVLink.\nINFO  Waiting "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" initial data on UDP. Please start the flight simulator to proceed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])])]),n("p",[s._v("이제 새 터미널에서 가제보 메뉴를 통해 아이리스 모델을 넣을 수 있는지 확인하십시오. 이 과정을 수행하려면 적당한 "),n("code",[s._v("sitl_gazebo")]),s._v(" 폴더를 환경 변수에 설정하십시오.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Firmware_clone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" Tools/setup_gazebo.bash "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/build/px4_sitl_default\n")])])]),n("p",[s._v("이제 ROS로 동작하며 아이리스 쿼드콥터 모델을 넣은 가제보를 시작하십시오. 아이리스를 불러오면 PX4 앱에 자동으로 연결합니다.")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("roslaunch gazebo_ros empty_world.launch world_name:"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/Tools/sitl_gazebo/worlds/iris.world\n")])])])])}),[],!1,null,null,null);t.default=e.exports},373:function(s,t,a){s.exports=a.p+"assets/img/px4_sitl_overview.d8cf146a.png"}}]);