(window.webpackJsonp=window.webpackJsonp||[]).push([[1204],{2553:function(s,t,a){"use strict";a.r(t);var e=a(19),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mavros"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mavros"}},[s._v("#")]),s._v(" MAVROS")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://wiki.ros.org/mavros#mavros.2BAC8-Plugins.sys_status",target:"_blank",rel:"noopener noreferrer"}},[s._v(" mavros "),a("OutboundLink")],1),s._v(" 功能包提供了 一台能够运行ros的机载电脑、支持MAVLINK协议的飞控和支持MAVLINK的地面站这三者之间的通讯功能。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("Note")]),s._v(" "),a("em",[s._v("MAVROS")]),s._v(' 是 ROS 与 MAVLink 协议之间的 有"官方" 支持的ROS功能包。 它当前正在扩展以启用 '),a("RouterLink",{attrs:{to:"/zh/middleware/micrortps.html"}},[s._v(" fast-RTPS messaging ")]),s._v(", 包括将 PX4 "),a("RouterLink",{attrs:{to:"/zh/middleware/uorb.html"}},[s._v(" uORB 消息 ")]),s._v(" 转换为常见 ROS 话题的代码。")],1)]),s._v(" "),a("p",[s._v("虽然 MAVROS 可用于与任何支持 MAVLink 协议的自动驾驶仪进行通信, 但此文档主要针对 PX4 飞控固件与运行ROS 的机载电脑之间的通讯问题。")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("MAVROS功能包可以用源代码或二进制方式安装。 （这是ROS功能包常见的两种安装方式，源代码安装可以修改源码，二进制方式安装则不行，只能直接调用源码） 建议有ROS基础的开发者使用源代码方式安装。")]),s._v(" "),a("blockquote",[a("p",[s._v("** 提示 **这些安装说明是 "),a("a",{attrs:{href:"https://github.com/mavlink/mavros/tree/master/mavros#installation",target:"_blank",rel:"noopener noreferrer"}},[s._v(" 官方安装指南 "),a("OutboundLink")],1),s._v(" 的简化版本。 They cover the "),a("em",[s._v("ROS Melodic")]),s._v(" release.")])]),s._v(" "),a("h3",{attrs:{id:"二进制安装-debian-ubuntu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二进制安装-debian-ubuntu"}},[s._v("#")]),s._v(" 二进制安装 (Debian/Ubuntu)")]),s._v(" "),a("p",[s._v("ROS 代码库有针对 Ubuntu x86、amd64 (x86_64) 和 armhf (ARMv7) 的二进制安装包。 Kinetic 同样支持 Debian Jessie amd64 和 arm64（ARMv8）。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("apt-get")]),s._v(" 进行安装:")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt-get install ros-kinetic-mavros ros-kinetic-mavros-extras\n")])])]),a("p",[s._v("然后通过运行 "),a("code",[s._v("install_geographiclib_datasets.sh")]),s._v(" 脚本来安装 "),a("a",{attrs:{href:"https://geographiclib.sourceforge.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v(" GeographicLib "),a("OutboundLink")],1),s._v(" 数据集:(译者注：注意这一步需要在命令前加sudo才会安装成功)")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://raw.githubusercontent.com/mavlink/mavros/master/mavros/scripts/install_geographiclib_datasets.sh\n./install_geographiclib_datasets.sh   \n")])])]),a("h3",{attrs:{id:"源码方式安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码方式安装"}},[s._v("#")]),s._v(" 源码方式安装")]),s._v(" "),a("p",[s._v("本安装方式假设你已经拥有了一个catkin_ws，如果没有您则需要按照以下指令创建一个：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/catkin_ws/src\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/catkin_ws\ncatkin init\nwstool init src\n")])])]),a("p",[s._v("你需要利用ROS的Python工具，如"),a("em",[s._v("wstool")]),s._v(" (for retrieving sources), "),a("em",[s._v("rosinstall")]),s._v(", and "),a("em",[s._v("catkin_tools")]),s._v(" (building) for this installation. 按照以下命令来安装： While they may have been installed during your installation of ROS you can also install them with:")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python-catkin-tools python-rosinstall-generator -y\n")])])]),a("blockquote",[a("p",[s._v('** 提示 **虽然可以使用 ** catkin_make ** 来编译MAVROS包, 但首选方法还是使用 ** catkin_tools **, 因为它是一种更通用、更 "友好" 的编译工具。')])]),s._v(" "),a("p",[s._v("如果这是你第一次使用wstool你需要初始化你的代码文件夹。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ wstool init ~/catkin_ws/src\n")])])]),a("p",[s._v("现在你已经准备好去编译。")]),s._v(" "),a("ol",[a("li",[s._v("Install MAVLink:"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("安装Mavlink \n  # We use the Kinetic reference for all ROS distros as it's not distro-specific and up to date\n  rosinstall_generator --rosdistro kinetic mavlink | tee /tmp/mavros.rosinstall\n")])])])]),s._v(" "),a("li",[s._v("安装MAVROS最新的版本：\n"),a("ul",[a("li",[a("p",[s._v("Released/stable")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("最新源码 \n sh\n rosinstall_generator --upstream-development mavros | tee -a /tmp/mavros.rosinstall\n")])])])]),s._v(" "),a("li",[a("p",[s._v("Latest source")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("发行版 / 稳定版 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("rosinstall_generator --upstream mavros "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" -a /tmp/mavros.rosinstall"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/code"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),s._v("\n```sh\nsh\n")])])])]),s._v(" "),a("h1",{attrs:{id:"for-fetching-all-the-dependencies-into-your-catkin-ws"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-fetching-all-the-dependencies-into-your-catkin-ws"}},[s._v("#")]),s._v(" For fetching all the dependencies into your catkin_ws,")]),s._v(" "),a("h1",{attrs:{id:"just-add-deps-to-the-above-scripts-e-g"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#just-add-deps-to-the-above-scripts-e-g"}},[s._v("#")]),s._v(" just add '--deps' to the above scripts, E.g.:")]),s._v(" "),a("h1",{attrs:{id:"rosinstall-generator-upstream-mavros-deps-tee-a-tmp-mavros-rosinstall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rosinstall-generator-upstream-mavros-deps-tee-a-tmp-mavros-rosinstall"}},[s._v("#")]),s._v(" rosinstall_generator --upstream mavros --deps | tee -a /tmp/mavros.rosinstall")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v(" ```\n")])])]),a("ol",[a("li",[s._v("创建工作区 & 安装依赖"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wstool merge -t src /tmp/mavros.rosinstall\n")])])])])]),s._v(" "),a("p",[s._v("wstool update -t src -j4\nrosdep install --from-paths src --ignore-src -y")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n1. 安装 [GeographicLib](https://geographiclib.sourceforge.io/) 数据集：\n")])])]),a("p",[s._v("./src/mavros/mavros/scripts/install_geographiclib_datasets.sh")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n1. 构建源码\n")])])]),a("p",[s._v("catkin build")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n1. 确保从工作区中使用 setup. bash 或 setup. zsh。\n")])])]),a("p",[s._v("#Needed or rosrun can't find nodes from this workspace.\nsource devel/setup.bash\nsource devel/setup.bash")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\nIn the case of error, there are addition installation and troubleshooting notes in the [mavros repo](https://github.com/mavlink/mavros/tree/master/mavros#installation).\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);