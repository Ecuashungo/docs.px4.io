(window.webpackJsonp=window.webpackJsonp||[]).push([[847],{1761:function(t,e,a){"use strict";a.r(e);var s=a(18),i=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"simulate-failsafes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simulate-failsafes"}},[t._v("#")]),t._v(" Simulate Failsafes")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/en/config/safety.html"}},[t._v("Failsafes")]),t._v(" define the safe limits/conditions under which you can safely use PX4, and the action that will be performed if a failsafe is triggered (for example, landing, holding position, or returning to a specified point).")],1),t._v(" "),a("p",[t._v("In SITL some failsafes are disabled by default to enable easier simulation usage.\nThis topic explains how you can test safety-critical behavior in SITL simulation before attempting it in the real world.")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("You can also test failsafes using "),a("RouterLink",{attrs:{to:"/en/simulation/hitl.html"}},[t._v("HITL simulation")]),t._v(".\nHITL uses the normal configuration parameters of your flight controller.")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("The "),a("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#sitl"}},[t._v("SITL parameters")]),t._v(" allow you to simulate other common sensor failure cases that are not covered here, including: loss of barometer, gyro and accelerometer, increased GPS noise etc.")],1)]),t._v(" "),a("h2",{attrs:{id:"data-link-loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-link-loss"}},[t._v("#")]),t._v(" Data Link Loss")]),t._v(" "),a("p",[t._v("The "),a("em",[t._v("Data Link Loss")]),t._v(" failsafe (unavailability of external data via MAVLink) is enabled by default.\nThis makes the simulation only usable with a connected GCS, SDK, or other MAVLink application.")]),t._v(" "),a("p",[t._v("Set the parameter "),a("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#NAV_DLL_ACT"}},[t._v("NAV_DLL_ACT")]),t._v(" to the desired failsafe action to change the behavior.\nFor example, set to "),a("code",[t._v("0")]),t._v(" to disable it.")],1),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("All parameters in SITL including this one get reset when you do "),a("code",[t._v("make clean")]),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"rc-link-loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rc-link-loss"}},[t._v("#")]),t._v(" RC Link Loss")]),t._v(" "),a("p",[t._v("The "),a("em",[t._v("RC Link Loss")]),t._v(" failsafe (unavailability of data from a remote control) is enabled by default.\nThis makes the simulation only usable with either an active MAVLink or remote control connection.")]),t._v(" "),a("p",[t._v("Set the parameter "),a("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#NAV_RCL_ACT"}},[t._v("NAV_RCL_ACT")]),t._v(" to the desired failsafe action to change the behavior.\nFor example, set to "),a("code",[t._v("0")]),t._v(" to disable it.")],1),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("All parameters in SITL including this one get reset when you do "),a("code",[t._v("make clean")]),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"low-battery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#low-battery"}},[t._v("#")]),t._v(" Low Battery")]),t._v(" "),a("p",[t._v("The simulated battery is implemented to never run out of energy, and by default only depletes to 50% of its capacity and hence reported voltage.\nThis enables testing of battery indication in GCS UIs without triggering low battery reactions that might interrupt other testing.")]),t._v(" "),a("p",[t._v("To change this minimal battery percentage value change "),a("a",{attrs:{href:"https://github.com/PX4/PX4-Autopilot/blob/9d67bbc328553bbd0891ffb8e73b8112bca33fcc/src/modules/simulator/simulator_mavlink.cpp#L330",target:"_blank",rel:"noopener noreferrer"}},[t._v("this line"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("To control how fast the battery depletes to the minimal value use the parameter "),a("RouterLink",{attrs:{to:"/en/advanced_config/parameter_reference.html#SIM_BAT_DRAIN"}},[t._v("SIM_BAT_DRAIN")]),t._v(".")],1),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("By changing this configuration in flight, you can also test regaining capacity to simulate inaccurate battery state estimation or in-air charging technology.")])]),t._v(" "),a("h2",{attrs:{id:"gps-loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gps-loss"}},[t._v("#")]),t._v(" GPS Loss")]),t._v(" "),a("p",[t._v("To simulate losing and regaining GPS information you can just stop the publication of GPS messages.\nThis is done by running the "),a("code",[t._v("param set SIM_GPS_BLOCK 1")]),t._v(" and "),a("code",[t._v("param set SIM_GPS_BLOCK 0")]),t._v(" commands on your SITL instance "),a("em",[t._v("pxh shell")]),t._v(" to block and unblock messages respectively.")])])}),[],!1,null,null,null);e.default=i.exports}}]);