(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{1323:function(e,t,s){e.exports=s.p+"assets/img/setup_whole.a50d8747.jpg"},1324:function(e,t,s){e.exports=s.p+"assets/img/power-pins.b7d302d0.jpg"},1325:function(e,t,s){e.exports=s.p+"assets/img/qgc-screenshot.a0938559.png"},2221:function(e,t,s){"use strict";s.r(t);var a=s(18),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"오드로이드-c1에서-qgroundcontrol로의-동영상-스트리밍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#오드로이드-c1에서-qgroundcontrol로의-동영상-스트리밍"}},[e._v("#")]),e._v(" 오드로이드 C1에서 QGroundControl로의 동영상 스트리밍")]),e._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("This article is somewhat out of date. Community members are encouraged to retest the instructions on a more recent Ubuntu version, and to import Odroid setup instructions into the wiki.")])]),e._v(" "),a("p",[e._v("This topic shows how to stream video from a camera (Logitech C920) attached to a companion computer ("),a("a",{attrs:{href:"https://magazine.odroid.com/wp-content/uploads/odroid-c1-user-manual.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Odroid C1"),a("OutboundLink")],1),e._v(") to another computer (over wifi) and display in "),a("em",[e._v("QGroundControl")]),e._v(".")]),e._v(" "),a("p",[e._v("The hardware setup is shown in the figure below. It consists of the following parts:")]),e._v(" "),a("ul",[a("li",[e._v("오드로이드 C1")]),e._v(" "),a("li",[e._v("로지텍 카메라 C920")]),e._v(" "),a("li",[e._v("무선랜 모듈 TP-LINK TL-WN722N")])]),e._v(" "),a("p",[a("img",{attrs:{src:s(1323),alt:"Setup"}})]),e._v(" "),a("p",[e._v("The instructions were tested on Ubuntu 14.04 but a similar approach should work for later Ubuntu versions.")]),e._v(" "),a("h2",{attrs:{id:"오드로이드-c1에-리눅스-환경-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#오드로이드-c1에-리눅스-환경-설치"}},[e._v("#")]),e._v(" 오드로이드 C1에 리눅스 환경 설치")]),e._v(" "),a("p",[e._v("오드로이드 C1에는 5V 직류 전원 커넥터로 전원을 공급합니다. 오드로이드를 드론에 연결할 경우 아래 그림과 같이 홀을 관통하는 "),a("a",{attrs:{href:"https://learn.sparkfun.com/tutorials/how-to-solder---through-hole-soldering",target:"_blank",rel:"noopener noreferrer"}},[e._v("방식"),a("OutboundLink")],1),e._v("으로 5V 직류 연결 커넥터 옆 핀 두개의 납땜을 권장합니다.")]),e._v(" "),a("h2",{attrs:{id:"대안-전원-연결-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#대안-전원-연결-설정"}},[e._v("#")]),e._v(" 대안 전원 연결 설정")]),e._v(" "),a("p",[e._v("The Odroid C1 can be powered via the 5V DC jack. If the Odroid is mounted on a drone, it is recommended to solder two pins next to the 5V DC jack by applying the through-hole soldering "),a("a",{attrs:{href:"https://learn.sparkfun.com/tutorials/how-to-solder---through-hole-soldering",target:"_blank",rel:"noopener noreferrer"}},[e._v("method"),a("OutboundLink")],1),e._v(" as shown in the figure below. The power is delivered by connecting the DC voltage source (5 V) via a jumper cable (red in the image above) with the Odroid C1 and connect the ground of the circuit with a jumper cable (black in the image above) with a ground pin of the Odroid C1 in the example setup.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(1324),alt:"Power Pins"}})]),e._v(" "),a("h2",{attrs:{id:"오드로이드-c1-무선랜-연결-사용"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#오드로이드-c1-무선랜-연결-사용"}},[e._v("#")]),e._v(" 오드로이드 C1 무선랜 연결 사용")]),e._v(" "),a("p",[e._v('이 절에서는 오드로이드 C1을 액세스 포인트로 구성하는 방법을 알려드리겠습니다. 이 내용은 pixhawk.org의 "액세스 포인트" 구축 자습서(더이상 내용이 없음)의 일부 적용 예에서 가져왔습니다.')]),e._v(" "),a("h2",{attrs:{id:"무선랜-액세스-포인트-구성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#무선랜-액세스-포인트-구성"}},[e._v("#")]),e._v(" 무선랜 액세스 포인트 구성")]),e._v(" "),a("p",[e._v("다음 단계에서는 오드로이드 C1에서 무선랜 모듈 이름을 wlan0(으)로 지정했음을 가정합니다. wlan0이(가) 나오는 모든 부분 대신 인터페이스 이름이 차이가 있는 경우 적절한 이름(예: wlan1)으로 바꾸십시오. To enable to stream the video from the camera via the Odroid C1 to the QGroundControl that runs on a computer it is not required to follow this section. However, it is shown here because setting up the Odroid C1 as an access point allows to use the system in a stand-alone fashion. The TP-LINK TL-WN722N is used as a WiFi module.")]),e._v(" "),a("p",[e._v("In the following steps it is assumed that the Odroid C1 assigns the name wlan0 to your WiFi module. Change all occurrences of wlan0 to the appropriate interface if different (e.g. wlan1).")]),e._v(" "),a("h3",{attrs:{id:"액세스-포인트-내장-컴퓨터"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#액세스-포인트-내장-컴퓨터"}},[e._v("#")]),e._v(" 액세스 포인트 내장 컴퓨터")]),e._v(" "),a("p",[e._v("필요한 프로그램을 설치하십시오")]),e._v(" "),a("p",[e._v("Install the necessary software")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" hostapd udhcpd\n")])])]),a("p",[e._v("Configure DHCP. Edit the file "),a("code",[e._v("/etc/udhcpd.conf")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("start "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.100 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# This is the range of IPs that the hotspot will give to client devices.")]),e._v("\nend "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.200\ninterface wlan0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The device uDHCP listens on.")]),e._v("\nremaining "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yes")]),e._v("\nopt dns "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.8")]),e._v(".8.8 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4.2")]),e._v(".2.2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The DNS servers client devices will use (if routing through the Ethernet link).")]),e._v("\nopt subnet "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("255.255")]),e._v(".255.0\nopt router "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The Onboard Computer's IP address on wlan0 which we will set up shortly.")]),e._v("\nopt lease "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("864000")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 10 day DHCP lease time in seconds")]),e._v("\n")])])]),a("p",[a("code",[e._v("/etc/default/udhcpd")]),e._v(" 파일을 편집하여 다음 줄을:")]),e._v(" "),a("p",[e._v("다음처럼 주석 처리하십시오.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("DHCPD_ENABLED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"no"')]),e._v("\n")])])]),a("p",[e._v("to")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v('#DHCPD_ENABLED="no"')]),e._v("\n")])])]),a("p",[e._v("초기 (무선랜 클라이언트) 자동 설정을 끄십시오. 다음 줄을(아마 해당 설정은 같이 두지 않든지 모두 두지 않는게 좋을지도 모릅니다):")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("auto wlan0\niface wlan0 inet static\naddress "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.1\nnetmask "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("255.255")]),e._v(".255.0\nnetwork "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.0\nbroadcast "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".2.255\nwireless-power off\n")])])]),a("p",[e._v("Disable the original (WiFi Client) auto configuration. Change the lines (they probably will not be all next to each other or may not even be there at all):")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("allow-hotplug wlan0\nwpa-roam /etc/wpa_supplicant/wpa_supplicant.conf\niface default inet dhcp\n")])])]),a("p",[e._v("to:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#allow-hotplug wlan0")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#iface default inet dhcp")]),e._v("\n")])])]),a("p",[e._v("If you have followed the "),a("em",[e._v("Odroid C1 tutorial")]),e._v(" (originally pixhawk.org) to set up the WiFi connection, you might have created the file "),a("code",[e._v("/etc/network/intefaces.d/wlan0")]),e._v(". Please comment out all lines in that file such that those configurations have no effect anymore.")]),e._v(" "),a("p",[e._v("Configure HostAPD: To create a WPA-secured network, edit the file "),a("code",[e._v("/etc/hostapd/hostapd.conf")]),e._v(" (create it if it does not exist) and add the following lines:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("auth_algs=1\nchannel=6            # Channel to use\nhw_mode=g\nieee80211n=1          # 802.11n assuming your device supports it\nignore_broadcast_ssid=0\ninterface=wlan0\nwpa=2\nwpa_key_mgmt=WPA-PSK\nwpa_pairwise=TKIP\nrsn_pairwise=CCMP\n# Change the to the proper driver\ndriver=nl80211\n# Change these to something else if you want\nssid=OdroidC1\nwpa_passphrase=QGroundControl\n")])])]),a("p",[e._v("Change "),a("code",[e._v("ssid=")]),e._v(", "),a("code",[e._v("channel=")]),e._v(", and "),a("code",[e._v("wpa_passphrase=")]),e._v(" to values of your choice. SSID is the hotspot's name which is broadcast to other devices, channel is what frequency the hotspot will run on, wpa_passphrase is the password for the wireless network. For many more options see the file "),a("code",[e._v("/usr/share/doc/hostapd/examples/hostapd.conf.gz")]),e._v(". Look for a channel that is not in use in the area. You can use tools such as "),a("em",[e._v("wavemon")]),e._v(" for that.")]),e._v(" "),a("p",[e._v("다음처럼 주석을 해제하고 변수값을 입력하십시오.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('#DAEMON_CONF=""\n')])])]),a("p",[e._v("to:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('DAEMON_CONF="/etc/hostapd/hostapd.conf"\n')])])]),a("p",[e._v("내장 컴퓨터 자체를 액세스 포인트로 띄워 나타내는데는 이정도면 충분하며, 지상 통제 장치에서 연결할 수 있습니다. 실제 액세스 포인트로 동작하게끔 하려면(무선랜 트래픽을 온보드 컴퓨터의 이더넷 연결로 전달하려면), 라우팅과 네트워크 주소 변환(NAT)을 설정해야합니다.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo update-rc.d hostapd enable\nsudo update-rc.d udhcpd enable\n")])])]),a("p",[e._v("This is enough to have the Onboard Computer present itself as an Access Point and allow your ground station to connect. If you truly want to make it work as a real Access Point (routing the WiFi traffic to the Onboard Computer’s Ethernet connection), we need to configure the routing and network address translation (NAT). Enable IP forwarding in the kernel:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" -c "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"echo 1 > /proc/sys/net/ipv4/ip_forward"')]),e._v("\n")])])]),a("p",[e._v("이 설정을 영구적으로 동작하게 하려면, 다음 명령을 실행하십시오:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" iptables -A FORWARD -i eth0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT\n")])])]),a("p",[e._v("/etc/network/interfaces 파일을 편집하여 다음 줄을 파일 하단에 추가하십시오:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" -c "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"iptables-save > /etc/iptables.ipv4.nat"')]),e._v("\n")])])]),a("p",[e._v("컴퓨터와 오드로이드 C1에 지스트리머 꾸러미를 설치하고 스트리밍을 시작하려면, "),a("a",{attrs:{href:"https://github.com/mavlink/qgroundcontrol/blob/master/src/VideoReceiver/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("QGroundControl README"),a("OutboundLink")],1),e._v("에 설명하는 내용을 따르십시오.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("up iptables-restore "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" /etc/iptables.ipv4.nat\n")])])]),a("h1",{attrs:{id:"지스트리머-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#지스트리머-설치"}},[e._v("#")]),e._v(" 지스트리머 설치")]),e._v(" "),a("p",[e._v("uvch264 플러그인으로 오드로이드에서 스트리밍 전송을 시작할 수 없다면, v4l2src 플러그인도 함께 시작하게 할 수도 있습니다.")]),e._v(" "),a("p",[e._v("여기서 "),a("code",[e._v("xxx.xxx.xxx.xxx")]),e._v(" 부분은 QGC를 실행하는 컴퓨터의 IP 주소입니다.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("gst-launch-1.0 v4l2src "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("device")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/dev/video0 "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" video/x-h264,width"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1920")]),e._v(",height"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1080")]),e._v(",framerate"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")]),e._v("/1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" h264parse "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" rtph264pay "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" udpsink "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("host")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("xxx.xxx.xxx.xxx "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("5000")]),e._v("\n")])])]),a("p",[e._v("Where "),a("code",[e._v("xxx.xxx.xxx.xxx")]),e._v(" is the IP address where QGC is running.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If you get the system error: "),a("code",[e._v("Permission denied")]),e._v(", you might need to prepend "),a("code",[e._v("sudo")]),e._v(" to the command above.")])]),e._v(" "),a("p",[e._v("Alternatively add the current user to the "),a("code",[e._v("video")]),e._v(" group as shown below (and then logout/login):")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("usermod")]),e._v(" -aG video "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$USER")]),e._v("\n")])])]),a("p",[e._v("실시간 동영상 전송 화면을 누르면, 좌측 하단 구석에는 인공위성 지도가 뜨고, 전체 배경에 동영상이 뜹니다.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(1325),alt:"QGC displaying video stream"}})]),e._v(" "),a("p",[e._v("If you click on the video stream, the satellite map is shown in the left bottom corner and the video is shown in the whole background.")])])}),[],!1,null,null,null);t.default=n.exports}}]);