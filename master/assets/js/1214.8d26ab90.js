(window.webpackJsonp=window.webpackJsonp||[]).push([[1214],{2587:function(t,e,a){"use strict";a.r(e);var r=a(18),i=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"airsim-仿真"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#airsim-仿真"}},[t._v("#")]),t._v(" AirSim 仿真")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.flightgear.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("FlightGear"),a("OutboundLink")],1),t._v(" is a flight simulator with powerful "),a("a",{attrs:{href:"http://wiki.flightgear.org/Flight_Dynamics_Model",target:"_blank",rel:"noopener noreferrer"}},[t._v("FDM engines"),a("OutboundLink")],1),t._v(". This allows FlightGear to simulate rotorcrafts under various meteorological conditions (which is why the bridge was originally developed by "),a("a",{attrs:{href:"https://www.thunderfly.cz/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ThunderFly s.r.o."),a("OutboundLink")],1),t._v(").")]),t._v(" "),a("p",[t._v("This page describes FlightGear's single-vehicle use in SITL. For information about multi-vehicle use see: "),a("RouterLink",{attrs:{to:"/zh/simulation/multi_vehicle_flightgear.html"}},[t._v("Multi-Vehicle Simulation with FlightGear")]),t._v(".")],1),t._v(" "),a("p",[a("strong",[t._v("Supported Vehicles:")]),t._v(" Autogyro, Plane, Rover.")]),t._v(" "),a("p",[t._v("{% youtube %}https://www.youtube.com/watch?v=iqdcN5Gj4wI{% endyoutube %}")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggTFI7XG4gIEZsaWdodEdlYXIgLS0-IEZsaWdodEdlYXItQnJpZGdlO1xuICBGbGlnaHRHZWFyLUJyaWRnZSAtLT4gTUFWTGluaztcbiAgTUFWTGluayAtLT4gUFg0X1NJVEw7XG5cdCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFI7XG4gIEZsaWdodEdlYXIgLS0-IEZsaWdodEdlYXItQnJpZGdlO1xuICBGbGlnaHRHZWFyLUJyaWRnZSAtLT4gTUFWTGluaztcbiAgTUFWTGluayAtLT4gUFg0X1NJVEw7XG5cdCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9",alt:"Mermaid Graph "}}),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Note")]),t._v("有关模拟器，模拟环境和可用模拟配置（例如支持的机型）的一般信息，请参见"),a("RouterLink",{attrs:{to:"/simulation/"}},[t._v("Simulation")]),t._v("。")],1)]),t._v(" "),a("p",[a("a",{attrs:{id:"installation"}})]),t._v(" "),a("h2",{attrs:{id:"installation-ubuntu-linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-ubuntu-linux"}},[t._v("#")]),t._v(" Installation (Ubuntu Linux)")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Note")]),t._v(" These instructions were tested on Ubuntu 18.04")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Install the usual "),a("RouterLink",{attrs:{to:"/zh/dev_setup/dev_env_linux_ubuntu.html"}},[t._v("Development Environment on Ubuntu LTS / Debian Linux")]),t._v(".")],1)]),t._v(" "),a("li",[a("p",[t._v("Install FlightGear:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" add-apt-repository ppa:saiarcot895/flightgear\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" flightgear\n")])])]),a("p",[t._v("This installs the latest stable FlightGear version from the PAA repository along with the the FGdata package.")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Tip")]),t._v(" For some models (e.g. those with electric engines) the daily build with the newest features may be necessary. Install this using the "),a("a",{attrs:{href:"https://launchpad.net/~saiarcot895/+archive/ubuntu/flightgear-edge",target:"_blank",rel:"noopener noreferrer"}},[t._v("daily build PPA"),a("OutboundLink")],1),t._v(".")])])]),t._v(" "),a("li",[a("p",[t._v("Check that you are able to run FlightGear:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("fgfs --launcher\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Set write permissions to the "),a("strong",[t._v("Protocols")]),t._v(" folder in the FlightGear installation directory:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo chmod a+w /usr/share/games/flightgear/Protocols\n")])])]),a("p",[t._v("Setting the permissions is required because the PX4-FlightGear-Bridge puts the communication definition file here.")])])]),t._v(" "),a("p",[t._v("Additional installation instructions can be found on "),a("a",{attrs:{href:"http://wiki.flightgear.org/Howto:Install_Flightgear_from_a_PPA",target:"_blank",rel:"noopener noreferrer"}},[t._v("FlightGear wiki"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[a("a",{attrs:{id:"running"}})]),t._v(" "),a("h2",{attrs:{id:"运行仿真"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行仿真"}},[t._v("#")]),t._v(" 运行仿真")]),t._v(" "),a("p",[t._v("Run a simulation by starting PX4 SITL, specifying the airframe configuration of your choice.")]),t._v(" "),a("p",[t._v("最简单的方法是在 PX4 * Firmware *存储库的根目录中打开一个终端，并为目标调用"),a("code",[t._v("make")]),t._v("，如以下部分所示。 For example, to start a plane simulation :")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /path/to/PX4-Autopilot\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" px4_sitl_nolockstep flightgear_rascal\n")])])]),a("p",[t._v("The supported vehicles and "),a("code",[t._v("make")]),t._v(" commands are listed below (click on the links to see the vehicle images).")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("载具类型")]),t._v(" "),a("th",[t._v("指令")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("RouterLink",{attrs:{to:"/zh/simulation/flightgear_vehicles.html#standard_plane"}},[t._v("标准构型的固定翼飞机")])],1),t._v(" "),a("td",[a("code",[t._v("make px4_sitl_nolockstep flightgear_rascal")])])]),t._v(" "),a("tr",[a("td",[a("RouterLink",{attrs:{to:"/zh/simulation/flightgear_vehicles.html#ugv"}},[t._v("Ackerman 车 （UGV/Rover）")])],1),t._v(" "),a("td",[a("code",[t._v("make px4_sitl_nolockstep flightgear_tf-r1")])])]),t._v(" "),a("tr",[a("td",[a("RouterLink",{attrs:{to:"/zh/simulation/flightgear_vehicles.html#autogyro"}},[t._v("旋翼机")])],1),t._v(" "),a("td",[a("code",[t._v("make px4_sitl_nolockstep flightgear_tf-g1")])])])])]),t._v(" "),a("p",[t._v("以上指令启动了一个具有完整 UI 的载具。 "),a("em",[t._v("QGroundControl")]),t._v(" should be able to automatically connect to the simulated vehicle.")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Note")]),t._v(" For the full list of FlightGear build targets (highlighted) run:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code")])])]),t._v(" "),a("p",[t._v("make px4_sitl_nolockstep list_vmd_make_targets | grep flightgear_")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('  For additional information see: [FlightGear Vehicles](../simulation/flightgear_vehicles.md) (this includes information about "unsupported" vehicles, and adding new vehicles).\n\n<span></span>\n> **Tip** 使用命令 `make px4_sitl list_vmd_make_targets` 获取所有支持的平台（你还可以过滤掉以 `gazebo_` 开头的平台）。\n\n\n## 让飞行器起飞\n\nThe `make` commands mentioned above first build PX4 and then run it along with the FlightGear simulator.\n\nOnce the PX4 has started it will launch the PX4 shell as shown below. You must select enter to get the command prompt.\n\n')])])]),a("hr"),t._v(" "),a("p",[t._v("| ___ \\ \\ \\ / /   /   |\n| |"),a("em",[t._v("/ /  \\ V /   / /| |\n|  __/   /   \\  / /")]),t._v("| |\n| |     / /^\\ \\ ___  |\n_|     /   /     |_/")]),t._v(" "),a("p",[t._v("px4 starting.")]),t._v(" "),a("p",[t._v("INFO  [px4] Calling startup script: /bin/sh etc/init.d-posix/rcS 0\nINFO  [param] selected parameter default file eeprom/parameters_1034\nI'm Mavlink to FlightGear Bridge\nTarged Bridge Freq: 200, send data every step: 1\n4\n5   -1\n7   -1\n2   1\n4   1\n[param] Loaded: eeprom/parameters_1034\nINFO  [dataman] Unknown restart, data manager file './dataman' size is 11798680 bytes\nINFO  [simulator] Waiting for simulator to accept connection on TCP port 4560\nINFO  [simulator] Simulator connected on TCP port 4560.\nINFO  [commander] LED: open /dev/led0 failed (22)\nINFO  [commander] Mission #3 loaded, 9 WPs, curr: 8\nINFO  [init] Mixer: etc/mixers-sitl/plane_sitl.main.mix on /dev/pwm_output0\nINFO  [mavlink] mode: Normal, data rate: 4000000 B/s on udp port 18570 remote port 14550\nINFO  [airspeed_selector] No airspeed sensor detected. Switch to non-airspeed mode.\nINFO  [mavlink] mode: Onboard, data rate: 4000000 B/s on udp port 14580 remote port 14540\nINFO  [mavlink] mode: Onboard, data rate: 4000 B/s on udp port 14280 remote port 14030\nINFO  [logger] logger started (mode=all)\nINFO  [logger] Start file log (type: full)\nINFO  [logger] Opened full log file: ./log/2020-04-28/22_03_36.ulg\nINFO  [mavlink] MAVLink only on localhost (set param MAV_BROADCAST = 1 to enable network)\nINFO  [px4] Startup script returned successfully\npxh> StatsHandler::StatsHandler() Setting up GL2 compatible shaders\nNow checking for plug-in osgPlugins-3.4.1/osgdb_nvtt.so\nPX4 Communicator: PX4 Connected.")]),t._v(" "),a("p",[t._v("pxh>")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nThe console will print out status as PX4 loads the airframe-specific initialization and parameter files, wait for (and connect to) the simulator. 一旦 INFO 打印出的 [ecl/EKF] 状态为 `commencing GPS fusion` ，则表明该载具已准备就绪可以解锁。 At this point, you should see a FlightGear window with some view of aircraft.\n\n\n> **Note** You can change the view by pressing **Ctrl+V**.\n\n![FlightGear UI](../../assets/simulation/flightgear/flightgearUI.jpg)\n\n你可以通过输入以下指令让飞机起飞：\n\n```sh\npxh> commander takeoff\n")])])]),a("h2",{attrs:{id:"使用-配置选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-配置选项"}},[t._v("#")]),t._v(" 使用/配置选项")]),t._v(" "),a("p",[t._v("You can tune your FG installation/settings by the following environment variables:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("FG\\_BINARY")]),t._v(" - absolute path to FG binary to run. (It can be an AppImage)")]),t._v(" "),a("li",[a("code",[t._v("FG\\_MODELS\\_DIR")]),t._v(" - absolute path to the folder containing the manually-downloaded aircraft models which should be used for simulation.")]),t._v(" "),a("li",[a("code",[t._v("FG\\_ARGS\\_EX")]),t._v(" - any additional FG parameters.")])]),t._v(" "),a("p",[a("a",{attrs:{id:"frame_rate"}})]),t._v(" "),a("h3",{attrs:{id:"display-the-frame-rate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#display-the-frame-rate"}},[t._v("#")]),t._v(" Display the frame rate")]),t._v(" "),a("p",[t._v("In FlightGear you can display the frame rate by enabling it in: "),a("strong",[t._v("View > View Options > Show frame rate")]),t._v(".")]),t._v(" "),a("p",[a("a",{attrs:{id:"custom_takeoff_location"}})]),t._v(" "),a("h3",{attrs:{id:"带光流的四旋翼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#带光流的四旋翼"}},[t._v("#")]),t._v(" 带光流的四旋翼")]),t._v(" "),a("p",[t._v("Takeoff location in SITL FlightGear can be set using additional variables. Setting the variable will override the default takeoff location.")]),t._v(" "),a("p",[t._v("The variables which can be set are as follows: "),a("code",[t._v("--airport")]),t._v(", "),a("code",[t._v("--runway")]),t._v(", and "),a("code",[t._v("--offset-distance")]),t._v(". Other options can be found on "),a("a",{attrs:{href:"http://wiki.flightgear.org/Command_line_options#Initial_Position_and_Orientation",target:"_blank",rel:"noopener noreferrer"}},[t._v("FlightGear wiki"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('FG_ARGS_EX="--airport=PHNL"  make px4_sitl_nolockstep flightgear_rascal\n')])])]),a("p",[t._v("The example above starts the simulation on the "),a("a",{attrs:{href:"http://wiki.flightgear.org/Suggested_airports",target:"_blank",rel:"noopener noreferrer"}},[t._v("Honolulu international airport"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{id:"joystick"}})]),t._v(" "),a("h3",{attrs:{id:"模拟一个-wifi-无人机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟一个-wifi-无人机"}},[t._v("#")]),t._v(" 模拟一个 Wifi 无人机")]),t._v(" "),a("p",[t._v("Joystick and thumb-joystick are supported through "),a("em",[t._v("QGroundControl")]),t._v(" ("),a("RouterLink",{attrs:{to:"/zh/simulation/#joystickgamepad-integration"}},[t._v("setup instructions here")]),t._v(").")],1),t._v(" "),a("p",[t._v('The joystick input in FlightGear should be disabled in otherwise there will be a "race condition" between the FG joystick input and PX4 commands.')]),t._v(" "),a("h2",{attrs:{id:"扩展与定制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩展与定制"}},[t._v("#")]),t._v(" 扩展与定制")]),t._v(" "),a("p",[t._v("To extend or customize the simulation interface, edit the files in the *"),a("em",[t._v("Tools/flightgear_bridge")]),t._v(" folder. The code is available in the "),a("a",{attrs:{href:"https://github.com/ThunderFly-aerospace/PX4-FlightGear-Bridge",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-FlightGear-Bridge repository"),a("OutboundLink")],1),t._v(" on Github.")]),t._v(" "),a("h2",{attrs:{id:"更多信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多信息"}},[t._v("#")]),t._v(" 更多信息")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/ThunderFly-aerospace/PX4-FlightGear-Bridge",target:"_blank",rel:"noopener noreferrer"}},[t._v("PX4-FlightGear-Bridge readme"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=i.exports}}]);